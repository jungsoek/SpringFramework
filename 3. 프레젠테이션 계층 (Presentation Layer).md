# 3. í”„ë ˆì  í…Œì´ì…˜ ê³„ì¸µ (Presentation Layer)

## ì»¨íŠ¸ë¡¤ëŸ¬ ì—­í• ê³¼ ì±…ì„

### ğŸ” 1. ì»¨íŠ¸ë¡¤ëŸ¬ë€?

**ì»¨íŠ¸ë¡¤ëŸ¬(Controller)**ëŠ” ì‚¬ìš©ìì˜ ìš”ì²­ì„ ë°›ì•„ì„œ ì ì ˆí•œ ë¡œì§ ê³„ì¸µ(Application/Service)ì„ í˜¸ì¶œí•˜ê³ , ê·¸ ê²°ê³¼ë¥¼ ì‚¬ìš©ìì—ê²Œ ë°˜í™˜í•˜ëŠ” **ì›¹ ê³„ì¸µ(Presentation Layer)**ì˜ êµ¬ì„± ìš”ì†Œì•¼.

> ğŸ“Œ ì›¹ì—ì„œ `URL â†’ ë™ì‘`ì„ ë§¤í•‘í•´ì£¼ëŠ” ì—”íŠ¸ë¦¬í¬ì¸íŠ¸ ì—­í• 

------

### ğŸ§­ 2. ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ì£¼ìš” ì±…ì„

| êµ¬ë¶„                            | ì„¤ëª…                                                         |
| ------------------------------- | ------------------------------------------------------------ |
| ğŸ“¥ ìš”ì²­ ìˆ˜ì‹                      | HTTP ìš”ì²­ì„ ë°›ì•„ íŒŒë¼ë¯¸í„°ë¥¼ ì²˜ë¦¬                             |
| ğŸ“„ ìš”ì²­ ë°ì´í„° ë°”ì¸ë”©            | DTOë¡œ ë³€í™˜í•˜ê±°ë‚˜ `@RequestBody`, `@RequestParam`, `@PathVariable`ë¡œ ê°’ ì¶”ì¶œ |
| ğŸ§ª ì…ë ¥ ê²€ì¦                     | `@Valid`, `@Validated`, `BindingResult` ë“±ì„ í†µí•´ ìœ íš¨ì„± ê²€ì¦ ìˆ˜í–‰ |
| ğŸ”€ ìœ ìŠ¤ì¼€ì´ìŠ¤ ì‹¤í–‰ ìœ„ì„          | Service/Application Layerì— ëª…ë ¹ì„ ìœ„ì„                      |
| ğŸ“¤ ì‘ë‹µ ë°˜í™˜                     | JSON, HTML, íŒŒì¼ ë“± ë‹¤ì–‘í•œ í˜•íƒœì˜ ì‘ë‹µ ìƒì„±                  |
| âš  ì˜ˆì™¸ ì²˜ë¦¬ ìœ„ì„ ë˜ëŠ” ìì²´ ì²˜ë¦¬ | ì˜ˆì™¸ê°€ ë°œìƒí•˜ë©´ `@ExceptionHandler` ë˜ëŠ” `@ControllerAdvice`ë¡œ ìœ„ì„ |

------

### ğŸ§© 3. ì»¨íŠ¸ë¡¤ëŸ¬ê°€ **í•´ì•¼ í•˜ëŠ” ê²ƒ (O)**

| í•­ëª©                 | ì´ìœ                                                    |
| -------------------- | ------------------------------------------------------ |
| âœ… HTTP íŒŒë¼ë¯¸í„° ì²˜ë¦¬ | HTTP ìš”ì²­ì€ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ê°€ì¥ ë¨¼ì € ë°›ìŒ                  |
| âœ… DTO ë³€í™˜           | í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì„ ë‚´ë¶€ ëª¨ë¸ê³¼ ë¶„ë¦¬í•˜ê¸° ìœ„í•´            |
| âœ… ì…ë ¥ ê²€ì¦          | APIì˜ ë¬´ê²°ì„±ì„ í™•ë³´í•˜ê¸° ìœ„í•´                           |
| âœ… ëª…ë ¹ ìœ„ì„          | Service ë˜ëŠ” Application Layerì— ì—…ë¬´ ìœ„ì„             |
| âœ… ì‘ë‹µ DTO ìƒì„±      | ë„ë©”ì¸ ê°ì²´ë¥¼ ì§ì ‘ ë…¸ì¶œí•˜ì§€ ì•Šê¸° ìœ„í•¨                  |
| âœ… Swagger ë¬¸ì„œí™”     | `@Operation`, `@ApiResponse` ë“±ìœ¼ë¡œ API ë¬¸ì„œ ëª…ì„¸ ê°€ëŠ¥ |

------

### âŒ 4. ì»¨íŠ¸ë¡¤ëŸ¬ê°€ **í•˜ì§€ ë§ì•„ì•¼ í•  ê²ƒ (X)**

| í•­ëª©                        | ì´ìœ                                             |
| --------------------------- | ----------------------------------------------- |
| âŒ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì§ì ‘ ì‹¤í–‰   | ì—­í• ì´ ë¶„ë¦¬ë˜ì§€ ì•Šìœ¼ë©´ í…ŒìŠ¤íŠ¸ì™€ ìœ ì§€ë³´ìˆ˜ ì–´ë ¤ì›€ |
| âŒ DB ì ‘ê·¼ (Repository í˜¸ì¶œ) | DBëŠ” Service/Applicationì„ í†µí•´ ê°„ì ‘ ì ‘ê·¼       |
| âŒ ë„ë©”ì¸ ê°ì²´ ì§ì ‘ ìƒì„±     | DTO â†’ ë„ë©”ì¸ ë³€í™˜ì€ Serviceë‚˜ Mapperì—ì„œ ìˆ˜í–‰   |
| âŒ íŠ¸ëœì­ì…˜ ì²˜ë¦¬             | `@Transactional`ì€ Service ê³„ì¸µì—ì„œ ì„ ì–¸        |

------

### ğŸ’¡ 5. ì‹¤ì „ ì˜ˆì œ

```
@RestController
@RequestMapping("/users")
public class UserController {

    private final RegisterUserUseCase registerUserUseCase;

    public UserController(RegisterUserUseCase registerUserUseCase) {
        this.registerUserUseCase = registerUserUseCase;
    }

    @PostMapping
    public ResponseEntity<Void> register(@RequestBody @Valid UserRegisterRequest request) {
        registerUserUseCase.register(request.toCommand());
        return ResponseEntity.status(HttpStatus.CREATED).build();
    }

    @GetMapping("/{id}")
    public ResponseEntity<UserResponse> getUser(@PathVariable Long id) {
        UserResponse user = registerUserUseCase.findUserById(id);
        return ResponseEntity.ok(user);
    }
}
```

#### ğŸ” êµ¬ì„± ë¶„ì„:

- `@RestController`ë¡œ API ì •ì˜
- `@RequestBody`, `@Valid`ë¡œ ì…ë ¥ ë°”ì¸ë”© + ê²€ì¦
- ë„ë©”ì¸ ì§ì ‘ ì¡°ì‘ âŒ â†’ ìœ ìŠ¤ì¼€ì´ìŠ¤ í˜¸ì¶œ O
- ì‘ë‹µ DTO(UserResponse)ë¥¼ ì‚¬ìš©í•˜ì—¬ ë„ë©”ì¸ ë…¸ì¶œ ë°©ì§€

------

### ğŸ§¬ 6. Controller â†’ Application Layer íë¦„

```
Client Request
    â†“
Controller
    â†“      â† (DTO ê²€ì¦ ë° ë°”ì¸ë”©)
Application/Service Layer
    â†“
Domain Layer
    â†“
Repository
```

------

### ğŸ›  7. ê¸°ìˆ  ìš”ì†Œ ìš”ì•½

| ê¸°ìˆ                                              | ì„¤ëª…                                            |
| ------------------------------------------------ | ----------------------------------------------- |
| `@Controller`                                    | HTML ë·° ë°˜í™˜ìš© (Thymeleaf ë“±)                   |
| `@RestController`                                | JSON API ì‘ë‹µìš© (`@Controller + @ResponseBody`) |
| `@RequestMapping`, `@GetMapping` ë“±              | URL ë§¤í•‘ ì§€ì •                                   |
| `@RequestBody`, `@RequestParam`, `@PathVariable` | ìš”ì²­ íŒŒë¼ë¯¸í„° ë°”ì¸ë”©                            |
| `@Valid`, `@Validated` + `BindingResult`         | ìš”ì²­ ìœ íš¨ì„± ê²€ì‚¬                                |
| `ResponseEntity<T>`                              | ì‘ë‹µ ì½”ë“œ, í—¤ë”, ë³¸ë¬¸ì„ í¬í•¨í•œ ê²°ê³¼ ë°˜í™˜        |
| `@ExceptionHandler`, `@ControllerAdvice`         | ì˜ˆì™¸ ì²˜ë¦¬ ë°©ì‹ ë¶„ë¦¬ ê°€ëŠ¥                        |

------

### âœ… ì •ë¦¬: Controllerì˜ ì—­í• ê³¼ ì±…ì„ ìš”ì•½í‘œ

| ì—­í•  êµ¬ë¶„   | ì„¤ëª…                                                         |
| ----------- | ------------------------------------------------------------ |
| âœ… ì±…ì„ ìˆìŒ | ìš”ì²­ ë°”ì¸ë”©, ì…ë ¥ ê²€ì¦, ì‘ë‹µ ìƒì„±, ìœ ìŠ¤ì¼€ì´ìŠ¤ í˜¸ì¶œ           |
| âœ… ê¸°ìˆ  ì‚¬ìš© | `@RestController`, `@RequestBody`, `@Valid`, `ResponseEntity` |
| âŒ ì±…ì„ ì—†ìŒ | ë„ë©”ì¸ ìƒíƒœ ë³€ê²½, DB ì ‘ê·¼, íŠ¸ëœì­ì…˜ ì²˜ë¦¬, ë¹„ì¦ˆë‹ˆìŠ¤ íŒë‹¨      |
| ğŸ’¡ í•µì‹¬ ì›ì¹™ | **ì–‡ê³  ê°€ë²¼ìš´ ê³„ì¸µ**ìœ¼ë¡œ ìœ ì§€í•´ì•¼ í•¨                         |

## `@Controller`, `@RestController` ì°¨ì´

### 1ï¸âƒ£ `@Controller`

#### âœ” ì •ì˜

Spring MVCì—ì„œ **ì›¹ í˜ì´ì§€(View)**ë¥¼ ë°˜í™˜í•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” **ê¸°ë³¸ ì»¨íŠ¸ë¡¤ëŸ¬ ì–´ë…¸í…Œì´ì…˜**.

#### âœ” ì£¼ìš” íŠ¹ì§•

- ë©”ì„œë“œê°€ ë¦¬í„´í•˜ëŠ” ê°’ì€ **ë·° ì´ë¦„(view name)**ìœ¼ë¡œ ê°„ì£¼ë¨.
- ì£¼ë¡œ **Thymeleaf, JSP, Freemarker** ê°™ì€ **í…œí”Œë¦¿ ì—”ì§„**ê³¼ í•¨ê»˜ ì‚¬ìš©.
- **ëª¨ë¸ ê°ì²´ ì „ë‹¬** ì‹œ `Model`, `ModelAndView`, `@ModelAttribute` ë“±ì„ ì‚¬ìš©.

#### âœ” ë°˜í™˜ ë°©ì‹

- ë¦¬í„´ê°’ì€ ë¬¸ìì—´ â†’ ViewResolver â†’ HTML ë Œë”ë§
- í•„ìš”í•˜ë©´ `@ResponseBody`ë¥¼ ë¶™ì—¬ì„œ JSON ì‘ë‹µë„ ê°€ëŠ¥

------

### 2ï¸âƒ£ `@RestController`

#### âœ” ì •ì˜

Spring 4.0ë¶€í„° ë„ì…ëœ, **REST API ì „ìš© ì»¨íŠ¸ë¡¤ëŸ¬ ì–´ë…¸í…Œì´ì…˜**.
 `@Controller + @ResponseBody`ì˜ ì¡°í•©ì´ ë‚´ë¶€ì ìœ¼ë¡œ ê²°í•©ëœ ê²ƒ.

#### âœ” ì£¼ìš” íŠ¹ì§•

- ë¦¬í„´ê°’ì´ **ê·¸ëŒ€ë¡œ HTTP ì‘ë‹µ ë°”ë””ì— ì§ë ¬í™”(JSON/XML ë“±)** ë¨.
- RESTful API ì„œë²„ ê°œë°œì— ì‚¬ìš©ë¨.
- ViewResolverëŠ” ì‚¬ìš©ë˜ì§€ ì•ŠìŒ.

------

### ğŸ” ë‚´ë¶€ ì°¨ì´ ë¹„êµ

| í•­ëª©                 | `@Controller`           | `@RestController` |
| -------------------- | ----------------------- | ----------------- |
| ëª©ì                  | HTML View ë°˜í™˜          | JSON/XML ë“± ì‘ë‹µ  |
| ë¦¬í„´ê°’ ì²˜ë¦¬          | View ì´ë¦„ìœ¼ë¡œ í•´ì„      | ê°ì²´ â†’ JSON ë³€í™˜  |
| ViewResolver         | ì ìš©ë¨                  | ì‚¬ìš© ì•ˆ í•¨        |
| `@ResponseBody` í•„ìš” | âœ… í•„ìš”í•¨ (JSON ì‘ë‹µ ì‹œ) | âŒ ìë™ ì ìš©ë¨     |
| ì‚¬ìš© ìœ„ì¹˜            | Web Page, SSR ì•±        | REST API ì„œë²„     |

------

### ğŸ§ª ì‹¤ì „ ì˜ˆì œ ë¹„êµ

#### ğŸ“˜ `@Controller` ì˜ˆì‹œ

```
@Controller
public class HomeController {

    @GetMapping("/hello")
    public String hello(Model model) {
        model.addAttribute("name", "Spring");
        return "hello"; // â†’ templates/hello.html
    }

    @GetMapping("/api/data")
    @ResponseBody
    public DataDto data() {
        return new DataDto("hi", 123); // JSON ë°˜í™˜
    }
}
```

#### ğŸ“— `@RestController` ì˜ˆì‹œ

```
@RestController
public class ApiController {

    @GetMapping("/api/data")
    public DataDto data() {
        return new DataDto("hi", 123); // ìë™ JSON ë°˜í™˜
    }
}
```

------

### ğŸ’¡ ì–¸ì œ ì–´ë–¤ ê±¸ ì¨ì•¼ í• ê¹Œ?

| ìƒí™©                                 | ì‚¬ìš© ì–´ë…¸í…Œì´ì…˜   |
| ------------------------------------ | ----------------- |
| HTML ë·°ë¥¼ ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì¤„ ë•Œ (SSR) | `@Controller`     |
| JSON ê¸°ë°˜ REST API ì‘ë‹µì´ í•„ìš”í•  ë•Œ  | `@RestController` |

------

### âœ… í•µì‹¬ ìš”ì•½ ì •ë¦¬

| í•­ëª©              | `@Controller`                       | `@RestController`             |
| ----------------- | ----------------------------------- | ----------------------------- |
| ê¸°ë³¸ ìš©ë„         | ì›¹ í˜ì´ì§€ ë°˜í™˜                      | API ì‘ë‹µ ì²˜ë¦¬                 |
| ë‚´ë¶€ êµ¬ì„±         | ë‹¨ë… ì–´ë…¸í…Œì´ì…˜                     | `@Controller + @ResponseBody` |
| ViewResolver ì‚¬ìš© | O                                   | X                             |
| ë¦¬í„´ ê°’           | View ì´ë¦„ or JSON (`@ResponseBody`) | JSON/XML ìë™ ì§ë ¬í™”          |
| ì£¼ ì‚¬ìš© ì‚¬ë¡€      | MVC ì›¹ ì•±                           | REST API ì„œë²„                 |

------

### ğŸ¯ ê²°ë¡ 

- **ì›¹ í™”ë©´(View ê¸°ë°˜ í˜ì´ì§€)**ì„ ì œê³µí•  ë•Œ: `@Controller`
- **í”„ë¡ íŠ¸ì—”ë“œì™€ JSONìœ¼ë¡œ í†µì‹ í•˜ëŠ” API ë°±ì—”ë“œ**ë¥¼ ë§Œë“¤ ë•Œ: `@RestController`

## View ë Œë”ë§ vs API ì‘ë‹µ ë°©ì‹

### ğŸ§© 1. ê°œë… ìš”ì•½

| êµ¬ë¶„       | View ë Œë”ë§ ë°©ì‹            | API ì‘ë‹µ ë°©ì‹                    |
| ---------- | --------------------------- | -------------------------------- |
| ëª©ì        | HTML í˜ì´ì§€ ìƒì„±            | JSON ë“± ë°ì´í„° ì „ë‹¬              |
| ëŒ€ìƒ       | ë¸Œë¼ìš°ì € ì‚¬ìš©ì             | í”„ë¡ íŠ¸ì—”ë“œ(JS), ì•± ë“± í´ë¼ì´ì–¸íŠ¸ |
| ë°˜í™˜ í˜•ì‹  | í…œí”Œë¦¿ ë·° (`.html`, `.jsp`) | JSON, XML, Text ë“±               |
| ì–´ë…¸í…Œì´ì…˜ | `@Controller`               | `@RestController`                |

------

### ğŸ¨ 2. View ë Œë”ë§ ë°©ì‹ (ì„œë²„ ì‚¬ì´ë“œ ë Œë”ë§, SSR)

#### âœ” ë™ì‘ íë¦„

1. ì‚¬ìš©ìê°€ URL ì ‘ì† â†’ Spring `@Controller`ì— ìš”ì²­ ë„ì°©
2. `Model`ì— ë°ì´í„°ë¥¼ ë‹´ìŒ
3. ë¦¬í„´ê°’ = View ì´ë¦„ (`String`)
4. `ViewResolver`ê°€ HTML/JSP í…œí”Œë¦¿ì„ ì°¾ì•„ ë Œë”ë§
5. ìµœì¢… HTMLì´ ë¸Œë¼ìš°ì €ì— ì „ì†¡ë¨

#### âœ” ì˜ˆì‹œ

```
@Controller
public class PageController {
    @GetMapping("/hello")
    public String hello(Model model) {
        model.addAttribute("name", "Spring");
        return "hello"; // â†’ templates/hello.html
    }
}
```

**í…œí”Œë¦¿ (Thymeleaf)**:

```
<p>Hello, [[${name}]]!</p>
```

#### âœ” íŠ¹ì§•

| í•­ëª©              | ì„¤ëª…                                       |
| ----------------- | ------------------------------------------ |
| ViewResolver ì‘ë™ | `return "hello"` â†’ `/templates/hello.html` |
| í…œí”Œë¦¿ ì—”ì§„ í•„ìš”  | Thymeleaf, JSP, Freemarker ë“±              |
| ì „ì²´ HTML ìƒì„±    | ì„œë²„ê°€ ì™„ì„±ëœ HTMLì„ ë§Œë“¤ì–´ ë³´ëƒ„           |
| SEO ì¹œí™”ì         | í¬ë¡¤ëŸ¬ê°€ HTMLì„ ë°”ë¡œ í•´ì„ ê°€ëŠ¥             |

------

### âš™ï¸ 3. API ì‘ë‹µ ë°©ì‹ (RESTful API, JSON)

#### âœ” ë™ì‘ íë¦„

1. í”„ë¡ íŠ¸ì—”ë“œê°€ AJAX, Axios, fetch ë“±ìœ¼ë¡œ ìš”ì²­
2. `@RestController` ë˜ëŠ” `@ResponseBody`ê°€ ì ìš©ëœ ë©”ì„œë“œ ì‹¤í–‰
3. Java ê°ì²´ë¥¼ JSONìœ¼ë¡œ **ìë™ ì§ë ¬í™”**
4. HTTP ì‘ë‹µ ë°”ë””ì— JSON ì „ë‹¬

#### âœ” ì˜ˆì‹œ

```
@RestController
public class ApiController {
    @GetMapping("/api/hello")
    public Map<String, String> hello() {
        return Map.of("message", "Hello, JSON");
    }
}
```

**ì‘ë‹µ ê²°ê³¼**:

```
{
  "message": "Hello, JSON"
}
```

#### âœ” íŠ¹ì§•

| í•­ëª©                        | ì„¤ëª…                          |
| --------------------------- | ----------------------------- |
| ë·° ë Œë”ë§ ì—†ìŒ              | ë°ì´í„°ë§Œ ì „ë‹¬                 |
| Jackson ì‚¬ìš©                | ê°ì²´ â†’ JSON ìë™ ì§ë ¬í™”       |
| ë‹¤ì–‘í•œ í´ë¼ì´ì–¸íŠ¸ ëŒ€ì‘      | React, Vue, Android, iOS ë“±   |
| RESTful ì„¤ê³„ ë°©ì‹ ì±„íƒ ê°€ëŠ¥ | URL + HTTP ë©”ì„œë“œë¡œ ì˜ë¯¸ í‘œí˜„ |

------

### ğŸ§ª ë¹„êµ í‘œ

| í•­ëª©             | View ë Œë”ë§ (SSR)    | API ì‘ë‹µ (JSON)                    |
| ---------------- | -------------------- | ---------------------------------- |
| ì£¼ìš” ì–´ë…¸í…Œì´ì…˜  | `@Controller`        | `@RestController`, `@ResponseBody` |
| ë°˜í™˜ê°’           | View ì´ë¦„ (`String`) | ê°ì²´, DTO, Map ë“±                  |
| ì „ì†¡ í¬ë§·        | HTML                 | JSON, XML                          |
| ì‘ë‹µ ëŒ€ìƒ        | ë¸Œë¼ìš°ì €             | ì›¹ í”„ë¡ íŠ¸ì—”ë“œ, ëª¨ë°”ì¼ ì•±           |
| í…œí”Œë¦¿ ì—”ì§„ í•„ìš” | O                    | X                                  |
| ì‚¬ìš© ëª©ì         | í™”ë©´ ì œê³µ            | ë°ì´í„° ì œê³µ                        |
| ì˜ˆì‹œ             | ê²Œì‹œíŒ HTML í˜ì´ì§€   | ê²Œì‹œê¸€ ëª©ë¡ JSON                   |

------

### ğŸ’¡ ì–¸ì œ ì–´ë–¤ ë°©ì‹ì„ ì¨ì•¼ í• ê¹Œ?

| ìƒí™©                                       | ì„ íƒ ë°©ì‹                    |
| ------------------------------------------ | ---------------------------- |
| ì›¹ ì‚¬ì´íŠ¸ ì¤‘ì‹¬ (ê´€ë¦¬ì í˜ì´ì§€, ê°„ë‹¨í•œ SSR) | View ë Œë”ë§ (`@Controller`)  |
| SPA(React/Vue), ì•± ì—°ë™ ë°±ì—”ë“œ, API ì„œë²„   | API ì‘ë‹µ (`@RestController`) |

------

### ğŸš€ í˜¼í•© ì‚¬ìš©ë„ ê°€ëŠ¥

Springì—ì„œëŠ” í•˜ë‚˜ì˜ í”„ë¡œì íŠ¸ ë‚´ì—ì„œ **ë‘ ë°©ì‹ ëª¨ë‘ ë³‘í–‰**í•  ìˆ˜ ìˆì–´.

```
@Controller
public class ViewController {
    @GetMapping("/home")
    public String home() { return "home"; }
}

@RestController
@RequestMapping("/api")
public class ApiController {
    @GetMapping("/users")
    public List<UserDto> getUsers() { ... }
}
```

------

### âœ… ìµœì¢… ìš”ì•½ ì •ë¦¬

| êµ¬ë¶„            | View ë Œë”ë§          | API ì‘ë‹µ             |
| --------------- | -------------------- | -------------------- |
| Controller ì¢…ë¥˜ | `@Controller`        | `@RestController`    |
| ë°ì´í„° ì²˜ë¦¬     | Model â†’ View         | DTO â†’ JSON           |
| ëª©ì             | HTML í™”ë©´ ì œê³µ       | ë°ì´í„° ì‘ë‹µ          |
| ëŒ€ìƒ            | ë¸Œë¼ìš°ì €             | ì•±, SPA, ì™¸ë¶€ ì‹œìŠ¤í…œ |
| í…œí”Œë¦¿ í•„ìš”     | O                    | X                    |
| JSON ë°˜í™˜       | `@ResponseBody` í•„ìš” | ê¸°ë³¸ ì ìš©ë¨          |

## í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ ë§¤í•‘: `@RequestMapping`, `@GetMapping`, `@PostMapping`

### ğŸ” 1. ê³µí†µ ëª©ì 

ëª¨ë‘ **HTTP ìš”ì²­ URLê³¼ ì»¨íŠ¸ë¡¤ëŸ¬ ë©”ì„œë“œë¥¼ ë§¤í•‘**í•˜ê¸° ìœ„í•œ ì–´ë…¸í…Œì´ì…˜ì´ì•¼.

> ğŸ“Œ í´ë¼ì´ì–¸íŠ¸ê°€ íŠ¹ì • URLë¡œ ìš”ì²­í–ˆì„ ë•Œ ì–´ë–¤ ë©”ì„œë“œê°€ ì‹¤í–‰ë ì§€ë¥¼ ì§€ì •í•¨.

------

### ğŸ§© 2. `@RequestMapping` â€“ ë²”ìš© ë§¤í•‘ ì–´ë…¸í…Œì´ì…˜

#### âœ” ê°œìš”

ê°€ì¥ ê¸°ë³¸ì ì´ë©° ê°•ë ¥í•œ ë§¤í•‘ ì–´ë…¸í…Œì´ì…˜.
 **ëª¨ë“  HTTP ë©”ì„œë“œ(GET, POST, PUT, DELETE ë“±)**ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆì–´.

#### âœ” ì£¼ìš” ì†ì„±

| ì†ì„±              | ì„¤ëª…                   | ì˜ˆì‹œ                            |
| ----------------- | ---------------------- | ------------------------------- |
| `value` or `path` | ìš”ì²­ URL ê²½ë¡œ          | `/users`, `/api/items`          |
| `method`          | HTTP ë©”ì„œë“œ ì§€ì •       | `RequestMethod.GET`             |
| `params`          | ìš”ì²­ íŒŒë¼ë¯¸í„° ì¡°ê±´     | `params = "mode=debug"`         |
| `headers`         | ìš”ì²­ í—¤ë” ì¡°ê±´         | `headers = "mode=debug"`        |
| `consumes`        | ìš”ì²­ Content-Type ì œì•½ | `consumes = "application/json"` |
| `produces`        | ì‘ë‹µ Content-Type ì œì•½ | `produces = "application/json"` |

#### âœ” ì˜ˆì‹œ

```
@RequestMapping(value = "/hello", method = RequestMethod.GET)
public String hello() {
    return "hello";
}
```

------

### ğŸ“˜ 3. `@GetMapping`, `@PostMapping` ë“± â€“ ì¶•ì•½í˜• ë§¤í•‘

#### âœ” ê°œìš”

Spring 4.3ë¶€í„° ë“±ì¥í•œ **HTTP ë©”ì„œë“œ ì „ìš© ë‹¨ì¶• ì–´ë…¸í…Œì´ì…˜**.
 ê°€ë…ì„±ê³¼ ì„ ì–¸ ê°„ê²°ì„±ì„ ìœ„í•´ ì‚¬ìš©ë¨.

| ì¶•ì•½í˜• ì–´ë…¸í…Œì´ì…˜ | ì˜ë¯¸                                             |
| ----------------- | ------------------------------------------------ |
| `@GetMapping`     | `@RequestMapping(method = RequestMethod.GET)`    |
| `@PostMapping`    | `@RequestMapping(method = RequestMethod.POST)`   |
| `@PutMapping`     | `@RequestMapping(method = RequestMethod.PUT)`    |
| `@DeleteMapping`  | `@RequestMapping(method = RequestMethod.DELETE)` |
| `@PatchMapping`   | `@RequestMapping(method = RequestMethod.PATCH)`  |

#### âœ” ì˜ˆì‹œ

```
@GetMapping("/users")
public List<UserDto> getUsers() { ... }

@PostMapping("/users")
public void createUser(@RequestBody UserDto dto) { ... }
```

------

### ğŸ§ª 4. ì˜ˆì‹œ ë¹„êµ

| `@RequestMapping` ë°©ì‹                                     | ì¶•ì•½í˜• ë°©ì‹            |
| ---------------------------------------------------------- | ---------------------- |
| `@RequestMapping(value="/api", method=RequestMethod.GET)`  | `@GetMapping("/api")`  |
| `@RequestMapping(value="/api", method=RequestMethod.POST)` | `@PostMapping("/api")` |

------

### ğŸ§  5. í´ë˜ìŠ¤ vs ë©”ì„œë“œ ë ˆë²¨ ì‚¬ìš©

#### âœ” í´ë˜ìŠ¤ ë ˆë²¨

```
@RestController
@RequestMapping("/users") // ê³µí†µ prefix
public class UserController {
    
    @GetMapping("/{id}")
    public UserDto get(@PathVariable Long id) { ... }

    @PostMapping
    public void create(@RequestBody UserDto dto) { ... }
}
```

> ê²°ê³¼ì ìœ¼ë¡œ:
>  `/users/{id}`, `/users` ë“±ìœ¼ë¡œ ê²½ë¡œê°€ ìë™ ì¡°í•©ë¨

------

### âš ï¸ 6. ìš°ì„ ìˆœìœ„ ë° ì¶©ëŒ ë°©ì§€

- ë™ì¼í•œ URLì— ëŒ€í•´ **ë™ì¼í•œ HTTP ë©”ì„œë“œê°€ ì¤‘ë³µ**ë˜ë©´ `Ambiguous mapping` ì˜¤ë¥˜ ë°œìƒ
- ê°€ê¸‰ì ì´ë©´ **ëª…í™•í•œ HTTP ë©”ì„œë“œ ì§€ì •** (`@GetMapping`, `@PostMapping` ì‚¬ìš© ê¶Œì¥)
- `params`, `headers`, `consumes`, `produces` ì¡°ê±´ìœ¼ë¡œ ì •ë°€í•˜ê²Œ ì¡°ì • ê°€ëŠ¥

------

### ğŸ›  7. ê³ ê¸‰ ì†ì„± ì˜ˆì‹œ

```
// íŠ¹ì • í—¤ë”ì™€ Content-Type ì¡°ê±´ìœ¼ë¡œë§Œ ë§¤í•‘ë¨
@RequestMapping(
  value = "/api/data",
  method = RequestMethod.POST,
  consumes = "application/json",
  produces = "application/json",
  headers = "X-Request-Type=internal"
)
public ResponseEntity<Data> handle(@RequestBody Data data) {
    return ResponseEntity.ok(data);
}
```

------

### âœ… ìµœì¢… ìš”ì•½ ë¹„êµí‘œ

| í•­ëª©             | `@RequestMapping`                      | `@GetMapping`, `@PostMapping` ë“± |
| ---------------- | -------------------------------------- | -------------------------------- |
| ì§€ì› HTTP ë©”ì„œë“œ | ëª¨ë“  ë©”ì„œë“œ(GET, POST, PUT, DELETE, â€¦) | í•˜ë‚˜ì˜ íŠ¹ì • ë©”ì„œë“œë§Œ             |
| ê°€ë…ì„±           | ë‹¤ì†Œ ì¥í™©í•¨                            | ê°„ê²°í•˜ê³  ì§ê´€ì                   |
| ì„¤ì • ìœ ì—°ì„±      | âœ… ë§¤ìš° ì„¸ë°€í•œ ì œì–´ ê°€ëŠ¥                | âŒ ì„¸ë¶€ ì†ì„±ì€ ì œí•œì              |
| ì¼ë°˜ ìš©ë„        | REST API, íŠ¹ìˆ˜ ì¡°ê±´ í•¸ë“¤ë§             | ë‹¨ìˆœ CRUD, RESTful ì„¤ê³„          |

------

### ğŸ“Œ ì–¸ì œ ì–´ë–¤ ê±¸ ì¨ì•¼ í• ê¹Œ?

| ìƒí™©                             | ì„ íƒ ì–´ë…¸í…Œì´ì…˜                         |
| -------------------------------- | --------------------------------------- |
| REST API ê¸°ë³¸ CRUD               | `@GetMapping`, `@PostMapping` ë“± ì¶•ì•½í˜• |
| Content-Type/í—¤ë” ì¡°ê±´ ì œì–´ í•„ìš” | `@RequestMapping`                       |
| í•˜ë‚˜ì˜ ë©”ì„œë“œê°€ ì—¬ëŸ¬ ë°©ì‹ ì§€ì›   | `@RequestMapping(method={...})`         |

## ìš”ì²­/ì‘ë‹µ ë³€í™˜: `@RequestBody`, `@ResponseBody`, JSON ì§ë ¬í™”

### ğŸ§© 1. ê°œìš”

| ì–´ë…¸í…Œì´ì…˜      | ì—­í•                                                    |
| --------------- | ------------------------------------------------------ |
| `@RequestBody`  | HTTP ìš”ì²­ ë³¸ë¬¸(JSON)ì„ **Java ê°ì²´ë¡œ ë³€í™˜** (ì—­ì§ë ¬í™”) |
| `@ResponseBody` | Java ê°ì²´ë¥¼ **HTTP ì‘ë‹µ ë³¸ë¬¸(JSON)ìœ¼ë¡œ ë³€í™˜** (ì§ë ¬í™”) |

ì´ ë‘ ì–´ë…¸í…Œì´ì…˜ì€ Springì´ ì œê³µí•˜ëŠ” `HttpMessageConverter`ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•¨.

------

### ğŸ§ª 2. `@RequestBody` â€“ ìš”ì²­ ë³¸ë¬¸ â†’ ê°ì²´ (Deserialization)

#### âœ” ê°œë…

HTTP ìš”ì²­ì˜ body(JSON/XML ë“±)ë¥¼ Java ê°ì²´ë¡œ ë³€í™˜í•¨.
 ëŒ€ê°œ JSON â†’ DTO ë¡œ ì—­ì§ë ¬í™”í•˜ëŠ” ë° ì‚¬ìš©ë¨.

```
@PostMapping("/users")
public ResponseEntity<Void> createUser(@RequestBody UserCreateRequest request) {
    // request.name, request.email ì‚¬ìš© ê°€ëŠ¥
    ...
}
```

**ìš”ì²­ ë³¸ë¬¸ ì˜ˆì‹œ** (`application/json`)

```
{
  "name": "Alice",
  "email": "alice@example.com"
}
```

**ë§¤í•‘ë˜ëŠ” DTO í´ë˜ìŠ¤**

```
public class UserCreateRequest {
    private String name;
    private String email;
    // getter, setter í•„ìˆ˜
}
```

> âœ” ë‚´ë¶€ì—ì„œ `MappingJackson2HttpMessageConverter`ê°€ Jacksonì„ ì‚¬ìš©í•´ JSON â†’ ê°ì²´ë¡œ ë³€í™˜í•¨.

------

### ğŸ“¤ 3. `@ResponseBody` â€“ ê°ì²´ â†’ ì‘ë‹µ ë³¸ë¬¸ (Serialization)

#### âœ” ê°œë…

Java ê°ì²´ë¥¼ HTTP ì‘ë‹µ bodyì— **ì§ë ¬í™”ëœ JSON í˜•íƒœë¡œ ì¶œë ¥**í•¨.
 ì¦‰, JSON API ì‘ë‹µì„ ìƒì„±í•  ë•Œ ì‚¬ìš©ë¨.

```
@GetMapping("/users/{id}")
@ResponseBody
public UserResponse getUser(@PathVariable Long id) {
    return new UserResponse("Alice", "alice@example.com");
}
```

> `@RestController`ëŠ” ëª¨ë“  ë©”ì„œë“œì— `@ResponseBody`ê°€ **ìë™ ì ìš©**ë¨.

------

### ğŸ” 4. JSON ë³€í™˜ íë¦„ (ì „ì²´ ê³¼ì •)

```
í´ë¼ì´ì–¸íŠ¸ â†’ JSON ìš”ì²­
           â†“
  @RequestBody â†’ Java ê°ì²´ë¡œ ì—­ì§ë ¬í™”
           â†“
     ë¹„ì¦ˆë‹ˆìŠ¤ ì²˜ë¦¬
           â†“
   Java ê°ì²´ â†’ @ResponseBody â†’ JSON ì§ë ¬í™”
           â†“
      í´ë¼ì´ì–¸íŠ¸ ì‘ë‹µ
```

------

### âš™ï¸ 5. ì‘ë™ ì›ë¦¬: `HttpMessageConverter`

Spring MVCëŠ” ë‚´ë¶€ì ìœ¼ë¡œ `HttpMessageConverter`ë¼ëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´
 ìš”ì²­/ì‘ë‹µ ë³€í™˜ì„ ì²˜ë¦¬í•¨.

| ì»¨ë²„í„°                                | ì„¤ëª…                            |
| ------------------------------------- | ------------------------------- |
| `MappingJackson2HttpMessageConverter` | JSON â†” Java ê°ì²´ (Jackson ì‚¬ìš©) |
| `StringHttpMessageConverter`          | ë¬¸ìì—´ â†” String                 |
| `FormHttpMessageConverter`            | í¼ ë°ì´í„° â†” ê°ì²´                |

Spring BootëŠ” ìë™ìœ¼ë¡œ JSON ë³€í™˜ìš© Jackson ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë“±ë¡í•¨.

------

### ğŸ” 6. í•„ìˆ˜ ì¡°ê±´ ë° ì£¼ì˜ì‚¬í•­

#### ğŸ“Œ `@RequestBody` ì‚¬ìš© ì‹œ ì£¼ì˜ì‚¬í•­

| í•­ëª©               | ì„¤ëª…                                                |
| ------------------ | --------------------------------------------------- |
| getter/setter í•„ìš” | Jacksonì´ ê°ì²´ í•„ë“œ ì ‘ê·¼ì— í•„ìš”                     |
| ê¸°ë³¸ ìƒì„±ì í•„ìš”   | JSON ì—­ì§ë ¬í™” ì‹œ ë°˜ë“œì‹œ í•„ìš”                        |
| `@Valid` ì—°ë™ ê°€ëŠ¥ | ì…ë ¥ ê°’ ê²€ì¦ ì‹œ `@Valid`, `BindingResult` ì‚¬ìš©      |
| Content-Type ì²´í¬  | ìš”ì²­ì˜ `Content-Type`ì´ `application/json`ì´ì–´ì•¼ í•¨ |

------

#### ğŸ“Œ `@ResponseBody` ì‚¬ìš© ì‹œ ì£¼ì˜ì‚¬í•­

| í•­ëª©                       | ì„¤ëª…                                                         |
| -------------------------- | ------------------------------------------------------------ |
| ê°ì²´ê°€ JSONìœ¼ë¡œ ì§ë ¬í™”ë¨   | toString()ì´ ì•„ë‹ˆë¼ JSON í˜•íƒœ                                |
| ìˆœí™˜ ì°¸ì¡° ì£¼ì˜             | ì—”í‹°í‹°ì—ì„œ ì–‘ë°©í–¥ ì°¸ì¡° ì‹œ `@JsonManagedReference`, `@JsonIgnore` ì‚¬ìš© |
| ì˜ˆì™¸ ì²˜ë¦¬ ì‹œ JSONìœ¼ë¡œ ì‘ë‹µ | `@ControllerAdvice`, `@ExceptionHandler`ì™€ ì¡°í•©í•˜ë©´ ì¢‹ìŒ     |

------

### ğŸ§¬ 7. ì‹¤ì „ ì¢…í•© ì˜ˆì œ

```
@RestController
@RequestMapping("/api/users")
public class UserController {

    @PostMapping
    public ResponseEntity<UserResponse> register(
        @RequestBody @Valid UserCreateRequest request) {

        // ì—­ì§ë ¬í™” ì™„ë£Œëœ request ê°ì²´ ì‚¬ìš©
        User user = userService.register(request);
        return ResponseEntity.ok(new UserResponse(user));
    }
}
```

#### ìš”ì²­ DTO

```
public class UserCreateRequest {
    private String name;
    private String email;
    // getter, setter, ê¸°ë³¸ ìƒì„±ì
}
```

#### ì‘ë‹µ DTO

```
public class UserResponse {
    private String name;
    private String email;
    public UserResponse(User user) {
        this.name = user.getName();
        this.email = user.getEmail();
    }
}
```

------

### âœ… ì •ë¦¬ í‘œ

| í•­ëª©      | @RequestBody                     | @ResponseBody                   |
| --------- | -------------------------------- | ------------------------------- |
| ë°©í–¥      | JSON â†’ ê°ì²´                      | ê°ì²´ â†’ JSON                     |
| ì‚¬ìš© ìœ„ì¹˜ | íŒŒë¼ë¯¸í„°                         | ë©”ì„œë“œ or í´ë˜ìŠ¤                |
| ì‘ë™ ì¡°ê±´ | ìš”ì²­ Content-Typeì´ JSON         | ì‘ë‹µ Content-Typeì´ JSON        |
| ìë™ ì²˜ë¦¬ | `@RestController`ì—ì„œ ìë™ ì‚¬ìš©  | `@RestController`ì—ì„œ ìë™ ì‚¬ìš© |
| ê¸°ë°˜ ê¸°ìˆ  | `HttpMessageConverter` â†’ Jackson |                                 |

------

### ğŸ›  ì¶”ê°€ ì‹¬í™” ì£¼ì œ

- Jackson ì»¤ìŠ¤í„°ë§ˆì´ì§• (`@JsonProperty`, `@JsonIgnore`, `ObjectMapper ì„¤ì •`)
- XML ë³€í™˜ìš© `Jaxb2RootElementHttpMessageConverter`
- ìš”ì²­ ë¡œê·¸ ë””ë²„ê¹… (`ContentCachingRequestWrapper`)
- `@ModelAttribute` vs `@RequestBody` ì°¨ì´

## ì…ë ¥ ê²€ì¦ ë° ì˜¤ë¥˜ ì²˜ë¦¬: `@Valid`, `BindingResult`, `@ExceptionHandler`

### ğŸ§© 1. ê°œìš”

| ìš”ì†Œ                    | ì—­í•                                                       |
| ----------------------- | --------------------------------------------------------- |
| `@Valid` / `@Validated` | ìš”ì²­ DTOì˜ **ìœ íš¨ì„± ê²€ì‚¬** ìˆ˜í–‰ (JSR-303 Bean Validation) |
| `BindingResult`         | ê²€ì¦ ì‹¤íŒ¨ ì‹œ **ì˜¤ë¥˜ ì •ë³´ ìˆ˜ì§‘**                           |
| `@ExceptionHandler`     | ê²€ì¦ ì‹¤íŒ¨ ë˜ëŠ” ì˜ˆì™¸ ë°œìƒ ì‹œ **ì „ì—­/ê°œë³„ ì˜ˆì™¸ ì²˜ë¦¬**       |

------

### âœ… ì „ì²´ íë¦„ ìš”ì•½

```
1. í´ë¼ì´ì–¸íŠ¸ ìš”ì²­(JSON)
    â†“
2. @RequestBody + @Valid â†’ ì…ë ¥ DTO ìœ íš¨ì„± ê²€ì‚¬
    â†“
3. BindingResultì— ì˜¤ë¥˜ ë‹´ê¹€ (ì»¨íŠ¸ë¡¤ëŸ¬ ë‚´ë¶€ ì²˜ë¦¬ ê°€ëŠ¥)
    â†“
4. ì²˜ë¦¬í•˜ì§€ ì•Šìœ¼ë©´ MethodArgumentNotValidException ë°œìƒ
    â†“
5. @ExceptionHandler or @ControllerAdvice ì—ì„œ ì²˜ë¦¬
    â†“
6. JSON í˜•ì‹ìœ¼ë¡œ ì˜¤ë¥˜ ì‘ë‹µ ë°˜í™˜
```

------

### ğŸ§ª 2. `@Valid` / `@Validated` â€“ ìœ íš¨ì„± ê²€ì¦ íŠ¸ë¦¬ê±°

#### âœ” ì—­í• 

- `javax.validation.Valid`
- DTOì— ì„ ì–¸ëœ **ì œì•½ ì¡°ê±´(annotation)**ì„ ê¸°ì¤€ìœ¼ë¡œ **ìë™ ê²€ì¦** ìˆ˜í–‰

#### âœ” ì§€ì›í•˜ëŠ” ì œì•½ ì–´ë…¸í…Œì´ì…˜

| ì–´ë…¸í…Œì´ì…˜        | ì„¤ëª…               |
| ----------------- | ------------------ |
| `@NotNull`        | nullì´ ì•„ë‹ˆì–´ì•¼ í•¨ |
| `@NotBlank`       | ê³µë°±/ë¹ˆë¬¸ì X      |
| `@Size(min, max)` | ê¸¸ì´ ì œí•œ          |
| `@Email`          | ì´ë©”ì¼ í˜•ì‹        |
| `@Pattern`        | ì •ê·œì‹             |
| `@Min`, `@Max`    | ìˆ«ì ë²”ìœ„          |

------

#### âœ” ì˜ˆì‹œ

```
public class UserCreateRequest {
    @NotBlank(message = "ì´ë¦„ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.")
    private String name;

    @Email(message = "ì´ë©”ì¼ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.")
    private String email;

    // getter/setter
}
```

------

### ğŸ“¥ 3. `BindingResult` â€“ ìœ íš¨ì„± ì‹¤íŒ¨ ì •ë³´ ìˆ˜ì§‘

#### âœ” ë™ì‘ ë°©ì‹

ì»¨íŠ¸ë¡¤ëŸ¬ ë©”ì„œë“œì—ì„œ `@Valid` ë°”ë¡œ ë’¤ì— `BindingResult`ë¥¼ ì„ ì–¸í•˜ë©´
 â†’ ê²€ì¦ ì‹¤íŒ¨ ì‹œì—ë„ **ì˜ˆì™¸ê°€ ë°œìƒí•˜ì§€ ì•Šê³  ë©”ì„œë“œ ë‚´ë¶€ì—ì„œ ì²˜ë¦¬ ê°€ëŠ¥**.

```
@PostMapping("/users")
public ResponseEntity<?> createUser(
    @RequestBody @Valid UserCreateRequest request,
    BindingResult bindingResult
) {
    if (bindingResult.hasErrors()) {
        return ResponseEntity.badRequest().body(bindingResult.getAllErrors());
    }

    userService.create(request);
    return ResponseEntity.ok().build();
}
```

> ğŸ“Œ `BindingResult`ê°€ ì—†ìœ¼ë©´ â†’ `MethodArgumentNotValidException`ì´ ë°œìƒí•˜ê³ , ì˜ˆì™¸ ì²˜ë¦¬ë¡œ ë„˜ì–´ê°.

------

### âš ï¸ 4. ì˜ˆì™¸ ë¯¸ì²˜ë¦¬ ì‹œ ë°œìƒí•˜ëŠ” ê¸°ë³¸ ì˜ˆì™¸

| ì˜ˆì™¸ í´ë˜ìŠ¤                       | ë°œìƒ ì¡°ê±´                                                   |
| --------------------------------- | ----------------------------------------------------------- |
| `MethodArgumentNotValidException` | `@RequestBody + @Valid` ì˜¤ë¥˜ ë°œìƒ ì‹œ                        |
| `ConstraintViolationException`    | `@Validated`ê°€ `@PathVariable`, `@RequestParam`ì— ì ìš©ë  ë•Œ |

------

### âš ï¸ 5. `@Validated`ì™€ `@Valid` ì°¨ì´

| í•­ëª©          | `@Valid`                 | `@Validated`                                          |
| ------------- | ------------------------ | ----------------------------------------------------- |
| íŒ¨í‚¤ì§€        | `javax.validation.Valid` | `org.springframework.validation.annotation.Validated` |
| ê·¸ë£¹ ì§€ì •     | âŒ ë¶ˆê°€ëŠ¥                 | âœ… ê°€ëŠ¥ (`@Validated(Group1.class)`)                   |
| AOP ë™ì‘ ê°€ëŠ¥ | âŒ                        | âœ… (ì˜ˆ: Serviceì—ì„œ ë©”ì„œë“œ íŒŒë¼ë¯¸í„° ê²€ì¦ ê°€ëŠ¥)         |

------

### ğŸ›¡ 6. `@ExceptionHandler` â€“ ì˜ˆì™¸ ì§ì ‘ ì²˜ë¦¬

#### âœ” ê°œë³„ ì»¨íŠ¸ë¡¤ëŸ¬ ë‚´ì—ì„œ ì²˜ë¦¬

```
@RestController
public class UserController {

    @ExceptionHandler(MethodArgumentNotValidException.class)
    public ResponseEntity<?> handleInvalid(MethodArgumentNotValidException ex) {
        List<String> errors = ex.getBindingResult()
                                .getFieldErrors()
                                .stream()
                                .map(err -> err.getField() + ": " + err.getDefaultMessage())
                                .toList();

        return ResponseEntity.badRequest().body(errors);
    }
}
```

------

#### ğŸ§± ì „ì—­ ì²˜ë¦¬ (`@ControllerAdvice`)

```
@RestControllerAdvice
public class GlobalExceptionHandler {

    @ExceptionHandler(MethodArgumentNotValidException.class)
    public ResponseEntity<?> handleValidationErrors(MethodArgumentNotValidException ex) {
        List<ErrorResponse> errors = ex.getBindingResult().getFieldErrors().stream()
            .map(e -> new ErrorResponse(e.getField(), e.getDefaultMessage()))
            .toList();

        return ResponseEntity.badRequest().body(errors);
    }
}
```

------

#### ğŸ“¦ ì˜¤ë¥˜ ì‘ë‹µ í¬ë§· ì •ì˜ ì˜ˆì‹œ

```
public class ErrorResponse {
    private String field;
    private String message;

    public ErrorResponse(String field, String message) {
        this.field = field;
        this.message = message;
    }
}
```

------

### âœ… ì¢…í•© ì •ë¦¬ í‘œ

| í•­ëª©                   | ì„¤ëª…                                                         |
| ---------------------- | ------------------------------------------------------------ |
| `@Valid`, `@Validated` | DTOì˜ í•„ë“œì— ëŒ€í•´ ìë™ ê²€ì¦ ìˆ˜í–‰                             |
| `BindingResult`        | ê²€ì¦ ì‹¤íŒ¨ ì‹œ ì˜ˆì™¸ ë°œìƒ ì—†ì´ ì˜¤ë¥˜ ìˆ˜ì§‘ ê°€ëŠ¥                   |
| `@ExceptionHandler`    | íŠ¹ì • ì˜ˆì™¸ ë°œìƒ ì‹œ ì§ì ‘ JSON ì‘ë‹µ ì²˜ë¦¬ ê°€ëŠ¥                   |
| `@ControllerAdvice`    | ì „ì—­ ì˜ˆì™¸ ì²˜ë¦¬ì ë“±ë¡ ê°€ëŠ¥ (í†µì¼ëœ API ì˜¤ë¥˜ í¬ë§· ì œê³µ)       |
| ê¸°ë³¸ ì˜ˆì™¸ í´ë˜ìŠ¤       | `MethodArgumentNotValidException`, `ConstraintViolationException` |

------

### ğŸ” ì •ë¦¬ íë¦„

```
1. ìš”ì²­ DTO â†’ @Valid â†’ Bean Validation (@NotNull, @Size ë“±)
2. ì‹¤íŒ¨
  â†’ BindingResult â†’ ì§ì ‘ ì²˜ë¦¬
  â†’ or MethodArgumentNotValidException â†’ @ExceptionHandler
3. JSON ì‘ë‹µ â†’ í´ë¼ì´ì–¸íŠ¸ ì „ë‹¬
```