# 13. Spring Boot ì‹¬í™”

## Spring Boot ìë™ ì„¤ì • ì›ë¦¬

### ğŸ§© 1. ì •ì˜

> **Spring BootëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì‚¬ìš© ì¤‘ì¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë¶„ì„í•´ì„œ**,
>  ê°œë°œìê°€ ì§ì ‘ ì„¤ì •í•˜ì§€ ì•Šì•„ë„ í•„ìš”í•œ Bean, ì„¤ì •, ì»´í¬ë„ŒíŠ¸ë¥¼ ìë™ìœ¼ë¡œ ë“±ë¡í•´ì¤Œ.

ì¦‰,

- `application.properties`ë‚˜ `@EnableXXX` ì—†ì´ë„
- **ë¼ì´ë¸ŒëŸ¬ë¦¬ ì˜ì¡´ì„±ë§Œ ì¶”ê°€í•˜ë©´ ë™ì‘í•˜ëŠ” ì´ìœ **ê°€ ë°”ë¡œ ìë™ ì„¤ì • ë•ë¶„ì´ë‹¤.

------

### ğŸ” 2. í•µì‹¬ ë™ì‘ íë¦„

Spring BootëŠ” ë‹¤ìŒ ìˆœì„œë¡œ ìë™ ì„¤ì •ì„ ì²˜ë¦¬í•œë‹¤:

```
1. @SpringBootApplication â†’ @EnableAutoConfiguration í¬í•¨
2. SpringFactoriesLoader â†’ META-INF/spring.factories ì½ê¸°
3. AutoConfiguration í´ë˜ìŠ¤ ë¡œë”© (ì¡°ê±´ë¶€ @Configuration)
4. @Conditionalë¡œ ì‹¤ì œ í™˜ê²½ì„ ê²€ì‚¬í•œ ë’¤ Bean ë“±ë¡ ì—¬ë¶€ ê²°ì •
```

------

### ğŸ¯ 3. í•µì‹¬ êµ¬ì„± ìš”ì†Œ

| ìš”ì†Œ                                    | ì„¤ëª…                                              |
| --------------------------------------- | ------------------------------------------------- |
| `@EnableAutoConfiguration`              | ìë™ ì„¤ì • í™œì„±í™”                                  |
| `spring.factories`                      | ì–´ë–¤ ìë™ ì„¤ì • í´ë˜ìŠ¤ë“¤ì„ ë¶ˆëŸ¬ì˜¬ì§€ ì •ì˜           |
| `@AutoConfiguration` / `@Configuration` | ì‹¤ì œ ìë™ ì„¤ì • í´ë˜ìŠ¤                             |
| `@ConditionalXXX`                       | í´ë˜ìŠ¤/ë¹ˆ/í”„ë¡œí¼í‹°ì˜ ì¡´ì¬ ì—¬ë¶€ì— ë”°ë¼ ì¡°ê±´ë¶€ ì„¤ì • |

------

#### âœ… 3-1. ì˜ˆ: `@SpringBootApplication` ë‚´ë¶€ êµ¬ì¡°

```
@SpringBootApplication
// â†“ ì´ê²ƒì´ ìë™ ì„¤ì •ì˜ ì‹œì‘ì 
@EnableAutoConfiguration
```

------

#### âœ… 3-2. `spring.factories` ì˜ˆ

```
# spring-boot-autoconfigure-3.0.x.jar
org.springframework.boot.autoconfigure.EnableAutoConfiguration=\
org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration,\
org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration,\
org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration,\
...
```

â¡ï¸ ì´ ì„¤ì •ì´ ìë™ìœ¼ë¡œ ì½í˜€ì„œ ê´€ë ¨ ì„¤ì •ë“¤ì´ í™œì„±í™”ë¨

------

### ğŸ”§ 4. ì¡°ê±´ ê¸°ë°˜ ì„¤ì •: `@ConditionalXXX`

ìë™ ì„¤ì •ì€ ë¬´ì¡°ê±´ ë“±ë¡í•˜ì§€ ì•Šê³ , ë‹¤ìŒ ì¡°ê±´ì´ ë§ëŠ” ê²½ìš°ì—ë§Œ ì„¤ì •ì„ ì ìš©í•´.

| ì¡°ê±´ ì–´ë…¸í…Œì´ì…˜                | ì„¤ëª…                                  |
| ------------------------------ | ------------------------------------- |
| `@ConditionalOnClass`          | í´ë˜ìŠ¤ê°€ classpathì— ìˆìœ¼ë©´ ì ìš©      |
| `@ConditionalOnMissingBean`    | íŠ¹ì • Beanì´ ë“±ë¡ë˜ì–´ ìˆì§€ ì•Šìœ¼ë©´ ì ìš© |
| `@ConditionalOnProperty`       | íŠ¹ì • í”„ë¡œí¼í‹°ê°€ ì„¤ì •ë˜ì–´ ìˆìœ¼ë©´ ì ìš©  |
| `@ConditionalOnBean`           | íŠ¹ì • Beanì´ ì´ë¯¸ ìˆì„ ë•Œë§Œ ì ìš©       |
| `@ConditionalOnWebApplication` | ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ í™˜ê²½ì¼ ê²½ìš°ë§Œ ì ìš©    |

------

#### ğŸ“˜ ì˜ˆì œ: JPA ìë™ ì„¤ì • ì¼ë¶€

```
@Configuration
@ConditionalOnClass({EntityManager.class})
@ConditionalOnMissingBean(LocalContainerEntityManagerFactoryBean.class)
@EnableConfigurationProperties(JpaProperties.class)
public class HibernateJpaAutoConfiguration {
    // DataSource, EntityManager ì„¤ì • ìë™ êµ¬ì„±
}
```

------

### ğŸ§± 5. ì‹¤ì „ ì˜ˆì œ

#### âœ… 5-1. `spring-boot-starter-data-jpa` ì˜ì¡´ì„± ì¶”ê°€ ì‹œ

ìë™ìœ¼ë¡œ ë‹¤ìŒì´ ì„¤ì •ë¨:

- `DataSourceAutoConfiguration`
- `JpaRepositoriesAutoConfiguration`
- `HibernateJpaAutoConfiguration`

ì´ ì„¤ì • ë•ë¶„ì— `@EnableJpaRepositories`, `EntityManagerFactory`, `DataSource` ì—†ì´ë„ ì‘ë™í•¨.

------

#### âœ… 5-2. ì»¤ìŠ¤í…€ AutoConfiguration ë§Œë“¤ê¸°

```
@Configuration
@ConditionalOnProperty(name = "feature.enabled", havingValue = "true")
public class CustomFeatureAutoConfiguration {

    @Bean
    public MyService myService() {
        return new MyServiceImpl();
    }
}
```

ê·¸ë¦¬ê³ :

```
# resources/META-INF/spring.factories
org.springframework.boot.autoconfigure.EnableAutoConfiguration=\
com.example.autoconfig.CustomFeatureAutoConfiguration
```

------

### ğŸ§  6. ì‹¤ë¬´ ì„¤ê³„ íŒ

| íŒ                                 | ì„¤ëª…                                                         |
| ---------------------------------- | ------------------------------------------------------------ |
| ê¸°ë³¸ ì„¤ì •ì€ ìë™ êµ¬ì„± ì‚¬ìš©         | ë³µì¡í•˜ì§€ ì•Šë‹¤ë©´ ìˆ˜ë™ ì„¤ì • ì—†ì´ ì‹œì‘í•´ë„ ì¶©ë¶„                 |
| ë¶ˆí•„ìš”í•œ ì„¤ì • ë„ê¸°                 | `spring.autoconfigure.exclude` ì‚¬ìš©                          |
| ì§ì ‘ Bean ë“±ë¡ ì‹œ ìë™ ì„¤ì • ë¬´ì‹œë¨ | `@ConditionalOnMissingBean` ì¡°ê±´ ë•Œë¬¸                        |
| `@ConditionalOnProperty`ë¡œ ì œì–´    | íŠ¹ì • ê¸°ëŠ¥ì˜ on/offë¥¼ ì‰½ê²Œ êµ¬í˜„ ê°€ëŠ¥                          |
| ì„¤ì • êµ¬ì¡° íŒŒì•…ì€ Actuator í™•ì¸     | `/actuator/beans`, `/actuator/conditions`ë¡œ í˜„ì¬ ì„¤ì • í™•ì¸ ê°€ëŠ¥ |

------

### âœ… ë§ˆë¬´ë¦¬ ìš”ì•½

| í•­ëª©             | ì„¤ëª…                                                         |
| ---------------- | ------------------------------------------------------------ |
| ìë™ ì„¤ì •ì˜ ì‹œì‘ | `@EnableAutoConfiguration`                                   |
| ì„¤ì • ë¡œë”© ë°©ì‹   | `spring.factories`ì˜ ìë™ ì„¤ì • í´ë˜ìŠ¤ ëª©ë¡                   |
| í•µì‹¬ ì œì–´ ì¡°ê±´   | `@ConditionalOnClass`, `@ConditionalOnMissingBean`, `@ConditionalOnProperty` |
| ì¥ì              | ì„¤ì • ìƒëµ, ê°œë°œ ìƒì‚°ì„± ê·¹ëŒ€í™”                                |
| ë‹¨ì              | ë‚´ë¶€ ë™ì‘ì„ ëª¨ë¥´ë©´ ë””ë²„ê¹… ì–´ë ¤ì›€, íŠœë‹ ì–´ë ¤ì›€                |

## `@SpringBootApplication`

### ğŸ§© 1. ì •ì˜

> Spring Boot ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ **ì‹œì‘ í´ë˜ìŠ¤**ì— ë¶™ì´ëŠ” **í•µì‹¬ ë©”íƒ€ ì–´ë…¸í…Œì´ì…˜**

ì¦‰, ì´ ì–´ë…¸í…Œì´ì…˜ í•˜ë‚˜ë§Œ ë¶™ì´ë©´

- ìë™ ì„¤ì •
- ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”
- ì„¤ì • í´ë˜ìŠ¤ ë“±ë¡
   ê¹Œì§€ **ëª¨ë‘ í•œ ë²ˆì— ì²˜ë¦¬ë¨**

------

### ğŸ” 2. ë‚´ë¶€ êµ¬ì„± (3ê°œì˜ ì–´ë…¸í…Œì´ì…˜ ì¡°í•©)

```
@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
@SpringBootConfiguration                 // @Configuration í¬í•¨
@EnableAutoConfiguration                // ìë™ ì„¤ì • ê¸°ëŠ¥ í™œì„±í™”
@ComponentScan                           // íŒ¨í‚¤ì§€ í•˜ìœ„ Bean ìë™ ë“±ë¡
public @interface SpringBootApplication {
}
```

| ë‚´ë¶€ ì–´ë…¸í…Œì´ì…˜            | ì—­í•                                            |
| -------------------------- | ---------------------------------------------- |
| `@SpringBootConfiguration` | ì„¤ì • í´ë˜ìŠ¤ì„ì„ ëª…ì‹œ (`@Configuration` í¬í•¨)   |
| `@EnableAutoConfiguration` | `spring.factories` ê¸°ë°˜ ìë™ ì„¤ì •              |
| `@ComponentScan`           | í˜„ì¬ í´ë˜ìŠ¤ì˜ íŒ¨í‚¤ì§€ í•˜ìœ„ì—ì„œ Beanì„ ìë™ íƒìƒ‰ |

------

### ğŸ“¦ 3. ì‚¬ìš© ì˜ˆì‹œ

```
@SpringBootApplication
public class MyApplication {
    public static void main(String[] args) {
        SpringApplication.run(MyApplication.class, args);
    }
}
```

------

### ğŸ¯ 4. ì£¼ìš” ì—­í•  ì •ë¦¬

| ê¸°ëŠ¥                    | ì„¤ëª…                                                         |
| ----------------------- | ------------------------------------------------------------ |
| ì„¤ì • í´ë˜ìŠ¤ ì§€ì •        | `@Configuration` ëŒ€ì²´                                        |
| ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”           | í˜„ì¬ ìœ„ì¹˜ë¥¼ ê¸°ì¤€ìœ¼ë¡œ Bean ìë™ ë“±ë¡                          |
| ìë™ ì„¤ì •               | ì˜ì¡´ì„± ê¸°ë°˜ ìë™ Bean êµ¬ì„± (`DataSource`, `WebMvc`, `JPA` ë“±) |
| ì• í”Œë¦¬ì¼€ì´ì…˜ ë¶€íŠ¸ìŠ¤íŠ¸ë© | `SpringApplication.run()`ê³¼ ì—°ê²°ë˜ì–´ ì „ì²´ ì•± ì‹¤í–‰ ì‹œì‘       |

------

### ğŸ§  5. ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ê¸°ì¤€

- `@ComponentScan`ì€ **í˜„ì¬ í´ë˜ìŠ¤ê°€ ìœ„ì¹˜í•œ íŒ¨í‚¤ì§€ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í•˜ìœ„ íŒ¨í‚¤ì§€ë¥¼ ìŠ¤ìº”**
- í•˜ìœ„ê°€ ì•„ë‹Œ **ìƒìœ„ íŒ¨í‚¤ì§€ì— Beanì´ ìˆìœ¼ë©´ ë“±ë¡ë˜ì§€ ì•ŠìŒ**
   â¡ï¸ **í•­ìƒ ìµœìƒìœ„ íŒ¨í‚¤ì§€ì— ë†“ëŠ” ê²ƒì´ ê¶Œì¥**

ì˜ˆ:

```
com.example
â”œâ”€â”€ MyApplication.java   â† ì—¬ê¸° ìˆì–´ì•¼ í•¨
â””â”€â”€ user
    â””â”€â”€ UserService.java (@Service)
```

------

### âš™ï¸ 6. í™•ì¥ ë°©ë²• (ì»¤ìŠ¤í„°ë§ˆì´ì§•)

#### âœ… â‘  ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ë²”ìœ„ ë³€ê²½

```
@SpringBootApplication(scanBasePackages = "com.example.other")
```

#### âœ… â‘¡ ìë™ ì„¤ì • ì œì™¸

```
@SpringBootApplication(exclude = {DataSourceAutoConfiguration.class})
```

------

### âš ï¸ 7. ì£¼ì˜ì‚¬í•­

| í•­ëª©                           | ì„¤ëª…                                                        |
| ------------------------------ | ----------------------------------------------------------- |
| ë‹¤ë¥¸ ì„¤ì • í´ë˜ìŠ¤ì— ì¤‘ë³µ ì„ ì–¸ âŒ | `@SpringBootApplication`ì€ í•œ ê³³ì—ë§Œ                        |
| Bean ì¤‘ë³µ ë“±ë¡ ì‹œ ì˜ˆì™¸         | ìë™ ì„¤ì •ì´ ì˜ˆìƒì¹˜ ëª»í•œ Beanì„ ë“±ë¡í•  ìˆ˜ ìˆìŒ               |
| ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ë²”ìœ„ ë°˜ë“œì‹œ í™•ì¸ | í´ë˜ìŠ¤ ìœ„ì¹˜ì— ë”°ë¼ Bean ë¯¸ë“±ë¡ ì´ìŠˆ ë°œìƒ ê°€ëŠ¥               |
| `main()` í•¨ìˆ˜ í•„ìˆ˜             | Spring BootëŠ” `main()`ì—ì„œ ì‹¤í–‰ë¨ (`SpringApplication.run`) |

------

### âœ… ë§ˆë¬´ë¦¬ ìš”ì•½

| í•­ëª©      | ì„¤ëª…                                                         |
| --------- | ------------------------------------------------------------ |
| êµ¬ì„±      | `@Configuration` + `@ComponentScan` + `@EnableAutoConfiguration` |
| ìœ„ì¹˜      | í”„ë¡œì íŠ¸ **ìµœìƒë‹¨ íŒ¨í‚¤ì§€**ì— ìœ„ì¹˜í•´ì•¼ í•¨                     |
| í•µì‹¬ ê¸°ëŠ¥ | ìë™ ì„¤ì • + Bean ë“±ë¡ + ì•± ë¶€íŠ¸ìŠ¤íŠ¸ë©                        |
| ì‹¤ë¬´ íŒ   | ìë™ ì„¤ì •ì„ ì œì™¸í•˜ê±°ë‚˜ í™•ì¥í•  ë• `exclude`, `scanBasePackages` í™œìš© |
| ìƒí˜¸ì‘ìš©  | `application.properties`, ì˜ì¡´ì„±, Bean êµ¬ì„±ì— ë”°ë¼ ë™ì‘ ê²°ì •ë¨ |

## `@EnableAutoConfiguration`, `@Conditional*` ê³„ì—´ ì–´ë…¸í…Œì´ì…˜

### ğŸ§© 1. `@EnableAutoConfiguration`ì´ë€?

```
@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
@Documented
@Inherited
@AutoConfigurationPackage
@Import(AutoConfigurationImportSelector.class)
public @interface EnableAutoConfiguration
```

#### âœ” í•µì‹¬ ê¸°ëŠ¥ ìš”ì•½

- **Spring Boot ìë™ ì„¤ì •ì˜ ì‹œì‘ì **
- `spring.factories` ë˜ëŠ” `AutoConfiguration.imports`ì— ëª…ì‹œëœ **ìë™ ì„¤ì • í´ë˜ìŠ¤ë“¤ì„ ì½ì–´ì™€ì„œ ë“±ë¡í•¨**
- ë‚´ë¶€ì ìœ¼ë¡œ `@Import(AutoConfigurationImportSelector.class)`ë¥¼ í†µí•´ ìë™ ì„¤ì • í›„ë³´ë“¤ì„ ìŠ¤ìº”

------

### ğŸ” 2. ì–´ë–»ê²Œ ìë™ ì„¤ì •ë˜ëŠ”ê°€?

```
@SpringBootApplication
   â†³ @EnableAutoConfiguration
       â†³ @Import(AutoConfigurationImportSelector.class)
           â†³ ìë™ ì„¤ì • í´ë˜ìŠ¤ ëª©ë¡ ë¡œë”© (spring.factories ë˜ëŠ” AutoConfiguration.imports)
               â†³ @Conditional* ê²€ì‚¬
                   â†³ ì¡°ê±´ ë§Œì¡± ì‹œ @Configuration â†’ Bean ë“±ë¡
```

------

### âš™ï¸ 3. `@Conditional*` ê³„ì—´ ì–´ë…¸í…Œì´ì…˜: ê°œë…ê³¼ ì—­í• 

> ìë™ ì„¤ì • í´ë˜ìŠ¤ëŠ” **ë¬´ì¡°ê±´ ì ìš©ë˜ì§€ ì•Šê³ **,
>  `@Conditional*` ê³„ì—´ ì–´ë…¸í…Œì´ì…˜ì˜ ì¡°ê±´ì— **ëª¨ë‘ ë§Œì¡±í•´ì•¼ë§Œ** ë“±ë¡ëœë‹¤.

ì´ ì–´ë…¸í…Œì´ì…˜ë“¤ì€ **"ì¡°ê±´ë¶€ Bean ë“±ë¡"**, **"ìƒí™©ì— ë”°ë¼ ì ìš© ì œì–´"**ë¼ëŠ” í•µì‹¬ ì„¤ê³„ë¥¼ ê°€ëŠ¥í•˜ê²Œ í•¨.

------

### ğŸ§© 4. ì£¼ìš” `@Conditional*` ì–´ë…¸í…Œì´ì…˜ ì¢…ë¥˜

| ì–´ë…¸í…Œì´ì…˜                        | ë™ì‘ ì¡°ê±´                         | ì£¼ ìš©ë„             |
| --------------------------------- | --------------------------------- | ------------------- |
| `@ConditionalOnClass`             | í´ë˜ìŠ¤ê°€ classpathì— ìˆìœ¼ë©´ ì ìš©  | ì˜ì¡´ì„± ê°ì§€         |
| `@ConditionalOnMissingClass`      | í´ë˜ìŠ¤ê°€ ì—†ìœ¼ë©´ ì ìš©              | ê²½ëŸ‰ ì„¤ì •           |
| `@ConditionalOnBean`              | íŠ¹ì • íƒ€ì…ì˜ Beanì´ ì´ë¯¸ ìˆì„ ë•Œë§Œ | Bean ì¡°ë¦½ ìˆœì„œ ì œì–´ |
| `@ConditionalOnMissingBean`       | íŠ¹ì • Beanì´ ì—†ì„ ë•Œë§Œ             | ê¸°ë³¸ Bean ì œê³µ      |
| `@ConditionalOnProperty`          | íŠ¹ì • í”„ë¡œí¼í‹°ê°€ ì„¤ì •ëì„ ë•Œë§Œ     | ì„¤ì • ê°’ ê¸°ë°˜ ON/OFF |
| `@ConditionalOnExpression`        | SpEL ì¡°ê±´ì´ ì°¸ì¼ ë•Œ               | ë™ì  ì œì–´           |
| `@ConditionalOnResource`          | íŠ¹ì • ë¦¬ì†ŒìŠ¤ ì¡´ì¬ ì‹œ               | config íŒŒì¼ ë“± ê°ì§€ |
| `@ConditionalOnWebApplication`    | ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì¼ ê²½ìš°ë§Œ          | ì›¹ MVC ì„¤ì •         |
| `@ConditionalOnNotWebApplication` | ì›¹ í™˜ê²½ì´ ì•„ë‹ ê²½ìš°ë§Œ             | CLI, batch          |
| `@ConditionalOnJava`              | íŠ¹ì • Java ë²„ì „ ì´ìƒì¼ ë•Œ          | JVM í™˜ê²½ ì œì–´       |

------

### ğŸ“˜ 5. ì‹¤ì „ ì˜ˆì œ (Spring Boot ë‚´ë¶€ êµ¬ì¡° ì¼ë¶€)

```
@Configuration
@ConditionalOnClass(DataSource.class)
@ConditionalOnProperty(name = "spring.datasource.url")
@ConditionalOnMissingBean(DataSource.class)
public class DataSourceAutoConfiguration {
    
    @Bean
    public DataSource dataSource() {
        return new HikariDataSource(); // ê¸°ë³¸ DataSource ì„¤ì •
    }
}
```

| ì¡°ê±´                                                 | ì„¤ëª…                                  |
| ---------------------------------------------------- | ------------------------------------- |
| `DataSource.class`ê°€ classpathì— ìˆê³                 | JDBC ê´€ë ¨ ì˜ì¡´ì„±ì´ ì¶”ê°€ë˜ì–´ ìˆì„ ë•Œë§Œ |
| `spring.datasource.url` í”„ë¡œí¼í‹°ê°€ ì¡´ì¬í•˜ê³           | application.ymlì— DB URLì´ ìˆì„ ë•Œ    |
| `DataSource` íƒ€ì…ì˜ Beanì´ ë¯¸ë¦¬ ë“±ë¡ë˜ì–´ ìˆì§€ ì•Šë‹¤ë©´ | ì§ì ‘ ì •ì˜í•˜ì§€ ì•Šì€ ê²½ìš°               |

â†’ ìë™ìœ¼ë¡œ HikariCPê°€ ë“±ë¡ë¨.

------

### ğŸ§  6. ì‹¤ë¬´ì—ì„œ ì“°ëŠ” íŒ¨í„´

#### âœ… â‘  ì„¤ì • í‚¤ ê¸°ë°˜ìœ¼ë¡œ ê¸°ëŠ¥ on/off ì œì–´

```
@Configuration
@ConditionalOnProperty(
  name = "feature.mail.enabled", 
  havingValue = "true", 
  matchIfMissing = false
)
public class MailServiceAutoConfiguration {
    @Bean
    public MailService mailService() {
        return new MailService();
    }
}
```

```
feature:
  mail:
    enabled: true
```

------

#### âœ… â‘¡ ì»¤ìŠ¤í„°ë§ˆì´ì§•ì„ í—ˆìš©í•˜ëŠ” ë°©ì‹

```
@Bean
@ConditionalOnMissingBean
public JwtEncoder jwtEncoder() {
    return new DefaultJwtEncoder();
}
```

â¡ï¸ ê°œë°œìê°€ `JwtEncoder`ë¥¼ ìˆ˜ë™ìœ¼ë¡œ ë“±ë¡í•˜ë©´ **ìë™ ì„¤ì •ì€ ë¹„í™œì„±í™”ë¨**

------

### âœ… ë§ˆë¬´ë¦¬ ìš”ì•½

| í•­ëª©                       | ì„¤ëª…                                                         |
| -------------------------- | ------------------------------------------------------------ |
| `@EnableAutoConfiguration` | ìë™ ì„¤ì •ì˜ ì§„ì…ì . ì„¤ì • í´ë˜ìŠ¤ë¥¼ ê°€ì ¸ì˜¤ê²Œ í•¨                |
| `@Conditional*`            | ìë™ ì„¤ì • í´ë˜ìŠ¤ê°€ **ì‹¤ì œë¡œ ì ìš©ë ì§€ ë§ì§€ë¥¼ ì¡°ê±´ë³„ë¡œ ê²°ì •**  |
| ì‹¤ë¬´ ì‚¬ìš©ë²•                | Bean ì¤‘ë³µ ë°©ì§€, ì¡°ê±´ë¶€ ê¸°ëŠ¥ í™œì„±í™”, ìœ ì—°í•œ ì„¤ì •              |
| ì¶”ì²œ íŒ¨í„´                  | `@ConditionalOnClass` + `@ConditionalOnProperty` + `@ConditionalOnMissingBean` 3ì¢… ì¡°í•© |
| ì„¤ê³„ ì´ì                   | ê°œë°œìëŠ” ì„¤ì • ì•ˆ í•´ë„ ëŒ€ë¶€ë¶„ ê¸°ë³¸ í™˜ê²½ êµ¬ì„± ì™„ë£Œë¨. í•„ìš” ì‹œ í™•ì¥ ê°€ëŠ¥ |

## ì™¸ë¶€ ì„¤ì • ë°”ì¸ë”©

- ## `@ConfigurationProperties`, `@Value`

  ### ğŸ§© 1. ê°œìš”

  | ì–´ë…¸í…Œì´ì…˜                 | ì—­í•                                                   |
  | -------------------------- | ----------------------------------------------------- |
  | `@Value`                   | ë‹¨ì¼ ê°’(ë¬¸ìì—´, ìˆ«ì ë“±)ì„ **ì§ì ‘ ì£¼ì…**              |
  | `@ConfigurationProperties` | ì™¸ë¶€ ì„¤ì •ì„ **ê°ì²´ ë‹¨ìœ„ë¡œ ë§¤í•‘**í•´ì„œ ì£¼ì… (ë¬¶ìŒ ì£¼ì…) |

  ------

  ### âœ… 2. `@Value` â€” ë‹¨ì¼ ê°’ ì£¼ì…

  #### ğŸ“˜ ì˜ˆì œ

  ```
  @Component
  public class MyComponent {
  
      @Value("${myapp.title}")
      private String title;
  
      @Value("${server.port:8080}")
      private int port; // ê¸°ë³¸ê°’ 8080
  }
  ```

  #### âœ… íŠ¹ì§•

  - ë¹ ë¥´ê³  ê°„ë‹¨í•¨
  - ë‹¨ì¼ í•„ë“œì—ë§Œ ì‚¬ìš©
  - `SpEL` ì§€ì› (`#{}` í‘œí˜„ ê°€ëŠ¥)
  - ê¸°ë³¸ê°’ ì§€ì • ê°€ëŠ¥ (`:defaultValue`)

  ------

  ### âœ… 3. `@ConfigurationProperties` â€” ë¬¶ìŒ ê°ì²´ ì£¼ì…

  #### ğŸ“˜ ì˜ˆì œ

  ```
  myapp:
    title: "My App"
    version: "1.0"
    security:
      enabled: true
  ```

  ```
  @Configuration
  @ConfigurationProperties(prefix = "myapp")
  public class MyAppProperties {
      private String title;
      private String version;
      private Security security;
  
      public static class Security {
          private boolean enabled;
          // getter/setter
      }
  
      // getter/setter
  }
  ```

  - ì‚¬ìš© ì‹œ ë¹ˆìœ¼ë¡œ ë“±ë¡ í•„ìš” â†’ `@Component` ë˜ëŠ” `@Configuration + @EnableConfigurationProperties` ì¡°í•©

  ------

  #### âœ… íŠ¹ì§•

  | í•­ëª©                     | ì„¤ëª…                                            |
  | ------------------------ | ----------------------------------------------- |
  | **ê°ì²´ ë‹¨ìœ„ ë°”ì¸ë”©**     | ì—¬ëŸ¬ ê°’ì„ í•œ ë²ˆì— ì£¼ì… ê°€ëŠ¥ (ê³„ì¸µ êµ¬ì¡°ë„ ê°€ëŠ¥)  |
  | **íƒ€ì… ì•ˆì •ì„±**          | Integer, Boolean ë“± íƒ€ì… ìë™ ë³€í™˜ ë° ê²€ì¦ ê°€ëŠ¥ |
  | **YAML/Properties ì§€ì›** | prefix ì§€ì • ë°©ì‹ìœ¼ë¡œ ê³„ì¸µ êµ¬ì¡° ì‰½ê²Œ ë§¤í•‘        |
  | **IDE ìë™ì™„ì„± ì§€ì›**    | Spring Boot í™˜ê²½ì—ì„œ `.yml` í¸ì§‘ê¸° ì§€ì›ë¨       |

  ------

  ### âš ï¸ 4. `@Value` vs `@ConfigurationProperties` ë¹„êµí‘œ

  | í•­ëª©             | `@Value`             | `@ConfigurationProperties`               |
  | ---------------- | -------------------- | ---------------------------------------- |
  | ì£¼ì… ë°©ì‹        | ë‹¨ì¼ ê°’              | ê°ì²´ ë‹¨ìœ„ (ë¬¶ìŒ ë°”ì¸ë”©)                  |
  | ë°”ì¸ë”© ëŒ€ìƒ      | í•„ë“œì— ì§ì ‘          | í´ë˜ìŠ¤ ì „ì²´                              |
  | íƒ€ì… ë³€í™˜        | ë‹¨ìˆœ ë¬¸ìì—´ â†’ ê¸°ë³¸í˜• | ë³µí•© ê°ì²´ê¹Œì§€ ìë™ ë³€í™˜                  |
  | ê³„ì¸µí˜• êµ¬ì¡° ì§€ì› | âŒ                    | âœ…                                        |
  | ê¸°ë³¸ê°’ ì§€ì •      | âœ… (`:default`)       | âŒ (ê¸°ë³¸ì€ ì˜¤ë¥˜ ë°œìƒ)                     |
  | SpEL ì‚¬ìš©        | âœ… (`#{}`)            | âŒ                                        |
  | ê²€ì¦ ì§€ì›        | âŒ                    | âœ… (`@Validated`, `@NotNull`)             |
  | ì„¤ì • ìë™ì™„ì„±    | âŒ                    | âœ… (Spring Boot Config Metadata ì§€ì›)     |
  | ì‹¤ë¬´ ì í•©ì„±      | ì†ŒëŸ‰/ì¦‰ì‹œ/ê°„ë‹¨ ì„¤ì •  | âœ… ëŒ€ê·œëª¨ ì„¤ì •, ìœ ì§€ë³´ìˆ˜ ì¤‘ì‹¬ ì„¤ê³„ì— ê°•í•¨ |

  ------

  ### ğŸ’¡ 5. ì‹¤ë¬´ ê¶Œì¥ ë°©ì‹

  | ìƒí™©                             | ê¶Œì¥ ë°©ì‹                                     |
  | -------------------------------- | --------------------------------------------- |
  | ë‹¨ì¼ ê°’ ë¹ ë¥´ê²Œ ì½ê¸°              | `@Value`                                      |
  | ë‹¤ìˆ˜ì˜ ê´€ë ¨ ì„¤ì •ì„ ê·¸ë£¹ìœ¼ë¡œ ì£¼ì… | âœ… `@ConfigurationProperties` (ì£¼ë ¥ ë°©ì‹)      |
  | ì„¤ì •ê°’ ê²€ì¦ì´ í•„ìš”í•œ ê²½ìš°        | `@ConfigurationProperties` + `@Validated`     |
  | ì™¸ë¶€ í™˜ê²½ì„ ê°•ë ¥íˆ ì¶”ìƒí™”í•  ë•Œ   | `@ConfigurationProperties` + í´ë˜ìŠ¤ ê¸°ë°˜ ì ‘ê·¼ |

  ------

  ### ğŸ” 6. ì„¤ì • í´ë˜ìŠ¤ ë“±ë¡ ë°©ì‹

  #### âœ… ìë™ ë“±ë¡

  ```
  @Component
  @ConfigurationProperties(prefix = "myapp")
  ```

  #### âœ… ìˆ˜ë™ ë“±ë¡ (ë” ëª…ì‹œì )

  ```
  @ConfigurationProperties(prefix = "myapp")
  public class MyAppProperties {
      ...
  }
  
  @Configuration
  @EnableConfigurationProperties(MyAppProperties.class)
  public class MyConfig { }
  ```

  ------

  ### ğŸ¯ 7. ìœ íš¨ì„± ê²€ì¦ ì˜ˆì œ

  ```
  @ConfigurationProperties("myapp")
  @Validated
  public class MyAppProperties {
      
      @NotBlank
      private String title;
  
      @Min(1)
      private int threadCount;
  
      // getter/setter
  }
  ```

  Spring Boot ì‹¤í–‰ ì‹œ ì„¤ì •ì´ í‹€ë¦¬ë©´ **ì• í”Œë¦¬ì¼€ì´ì…˜ ë¶€íŒ… ì‹¤íŒ¨**ë¡œ ë°©ì§€ ê°€ëŠ¥

  ------

  ### âœ… ë§ˆë¬´ë¦¬ ìš”ì•½

  | í•­ëª©                       | ì„¤ëª…                                                         |
  | -------------------------- | ------------------------------------------------------------ |
  | `@Value`                   | ë¹ ë¥´ê³  ê°„ë‹¨, ë‹¨ì¼ í•„ë“œì— ì‚¬ìš©                                |
  | `@ConfigurationProperties` | ë¬¶ìŒ ë§¤í•‘, ê³„ì¸µ êµ¬ì¡°, ìœ íš¨ì„± ê²€ì¦, ì‹¤ë¬´ ìµœì í™”               |
  | ì¶”ì²œ                       | ëŒ€ë¶€ë¶„ì˜ ì‹¤ë¬´ ì„¤ì •ì€ `@ConfigurationProperties`ë¡œ êµ¬ì„±í•˜ëŠ” ê²ƒì´ ìœ ì§€ë³´ìˆ˜ì— ìœ ë¦¬ |
  | ìŠ¤í”„ë§ ë¶€íŠ¸ ì² í•™ê³¼ ê¶í•©    | `application.yml` + ê°ì²´ ë°”ì¸ë”© ê¸°ë°˜ì´ ìŠ¤í”„ë§ ë¶€íŠ¸ì˜ ê¸°ë³¸ ì„¤ê³„ ë°©í–¥ |

## ë‹¤ì¤‘ ì„¤ì • íŒŒì¼ ê´€ë¦¬

### ğŸ§© 1. ëª©ì 

- **ìš´ì˜ í™˜ê²½(dev/prod/test/staging)**ì— ë”°ë¼ ì„œë¡œ ë‹¤ë¥¸ ì„¤ì • ê°’ì„ ì‚¬ìš©í•˜ê³  ì‹¶ì„ ë•Œ
- ì˜ˆ: `ê°œë°œìš© DB`, `ìš´ì˜ìš© DB`, `ë¡œì»¬ìš© ì„¤ì •`, `ë¡œê¹… ë ˆë²¨`, `ì™¸ë¶€ API í‚¤`, `ì„œë²„ í¬íŠ¸` ë“±

â¡ï¸ Spring BootëŠ” **ë‹¤ì¤‘ `application-{profile}.yml` ë˜ëŠ” `.properties`** íŒŒì¼ì„ í†µí•´
 ìë™ìœ¼ë¡œ í™˜ê²½ì„ ë¶„ë¦¬í•˜ê³  ë¡œë”©í•  ìˆ˜ ìˆì–´.

------

### ğŸ“¦ 2. ì„¤ì • íŒŒì¼ì˜ ê³„ì¸µ êµ¬ì¡°

```
src/
â””â”€â”€ main/
    â””â”€â”€ resources/
        â”œâ”€â”€ application.yml               â† ê³µí†µ (ê¸°ë³¸ ì„¤ì •)
        â”œâ”€â”€ application-dev.yml          â† ê°œë°œ í™˜ê²½ìš©
        â”œâ”€â”€ application-prod.yml         â† ìš´ì˜ í™˜ê²½ìš©
        â”œâ”€â”€ application-test.yml         â† í…ŒìŠ¤íŠ¸ í™˜ê²½ìš©
```

------

### âš™ï¸ 3. í™œì„±í™” ë°©ë²• (`spring.profiles.active`)

#### âœ… ë°©ë²• 1: `application.yml` ë‚´ë¶€ì—ì„œ í™œì„±í™”

```
spring:
  profiles:
    active: dev
```

> ğŸ“Œ `application.yml`ì´ ë¨¼ì € ë¡œë”©ë˜ê³ ,
>  `active: dev`ì— ë”°ë¼ â†’ `application-dev.yml`ì´ **ì¶”ê°€ë¡œ ë³‘í•©ë¨**

------

#### âœ… ë°©ë²• 2: ì‹¤í–‰ íŒŒë¼ë¯¸í„°ë¡œ ì§€ì • (ì‹¤ë¬´ ì¶”ì²œ)

```
# IntelliJ ë˜ëŠ” shell ì‹¤í–‰ ì‹œ
--spring.profiles.active=prod
```

ë˜ëŠ” `VM options`:

```
-Dspring.profiles.active=prod
```

> ì‹¤ë¬´ì—ì„œëŠ” ë°°í¬ ìë™í™” ë„êµ¬, CI/CDì—ì„œ í”„ë¡œíŒŒì¼ì„ ë™ì ìœ¼ë¡œ ì§€ì •í•¨

------

### ğŸ¯ 4. ì„¤ì • ë³‘í•© ì›ë¦¬ (ë®ì–´ì“°ê¸° ì•„ë‹˜)

- Spring BootëŠ” **ê¸°ë³¸ ì„¤ì •(`application.yml`)ì„ ë¨¼ì € ë¡œë”©**í•˜ê³ ,
- ì´í›„ `application-{profile}.yml`ì„ **ë³‘í•©(override)**í•˜ëŠ” ë°©ì‹

```
# application.yml
server:
  port: 8080
  compression:
    enabled: true
```

```
# application-prod.yml
server:
  port: 80
```

â¡ï¸ ìµœì¢… ì„¤ì •:

```
server:
  port: 80
  compression:
    enabled: true
```

------

### ğŸ“˜ 5. ì˜ˆì œ: í™˜ê²½ë³„ DB ì„¤ì • ë¶„ë¦¬

```
# application.yml
spring:
  datasource:
    username: default
    password: default
```

```
# application-dev.yml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/devdb
    username: dev
    password: dev

```

```
# application-prod.yml
spring:
  datasource:
    url: jdbc:mysql://prod-db:3306/proddb
    username: prod
    password: prod
```

------

### ğŸ”„ 6. `@Profile` ì–´ë…¸í…Œì´ì…˜ê³¼ í•¨ê»˜ ì‚¬ìš©í•˜ê¸°

```
@Service
@Profile("dev")
public class LocalMailService implements MailService { ... }

@Service
@Profile("prod")
public class SmtpMailService implements MailService { ... }
```

â¡ï¸ `spring.profiles.active`ê°€ `dev`ë©´ `LocalMailService`ë§Œ ë“±ë¡ë¨

------

### ğŸ“š 7. ê³ ê¸‰: ë‹¤ì¤‘ í”„ë¡œíŒŒì¼ ì§€ì •

```
spring:
  profiles:
    active: "dev,local"
```

- `application-dev.yml`, `application-local.yml`ì´ ìˆœì„œëŒ€ë¡œ ì ìš©ë¨
- ë’¤ì— ë‚˜ì˜¬ìˆ˜ë¡ ìš°ì„ ìˆœìœ„ê°€ ë†’ìŒ (override)

------

### ğŸ” 8. ì‹¤ë¬´ ìš´ì˜ íŒ

| íŒ                                            | ì„¤ëª…                                            |
| --------------------------------------------- | ----------------------------------------------- |
| `application.yml`ì€ ê³µí†µ ì„¤ì •                 | ê³µí†µ ë¡œê¹…, íƒ€ì„ì¡´, JSON ì§ë ¬í™” ë“±               |
| ë¯¼ê° ì •ë³´ëŠ” ë³„ë„ í™˜ê²½ë³€ìˆ˜ ê´€ë¦¬                | `application-prod.yml`ì— ì ˆëŒ€ í‚¤ ì§ì ‘ ì“°ì§€ ë§ê¸° |
| CI/CDì—ì„œ `--spring.profiles.active` ì „ë‹¬     | ìš´ì˜/ìŠ¤í…Œì´ì§• ë°°í¬ ì‹œ ìë™í™”                    |
| `application-local.yml`ì€ `.gitignore`ë¡œ ì œì™¸ | ê°œì¸ ê°œë°œ ì„¤ì •ì€ ê³µìœ  ê¸ˆì§€                      |
| ì„¤ì • ì¶©ëŒ ì‹œ actuatorë¡œ í™•ì¸                  | `/actuator/env`ì—ì„œ ì‹¤ì œ ê°’ í™•ì¸ ê°€ëŠ¥           |

------

### âœ… ë§ˆë¬´ë¦¬ ìš”ì•½

| í•­ëª©        | ì„¤ëª…                                                      |
| ----------- | --------------------------------------------------------- |
| ê¸°ë³¸ íŒŒì¼   | `application.yml` (ê³µí†µ ì„¤ì •)                             |
| í™˜ê²½ë³„ ë¶„ê¸° | `application-{profile}.yml`                               |
| í™œì„±í™” ë°©ë²• | `spring.profiles.active=prod`                             |
| ë³‘í•© ë°©ì‹   | ìœ„ì— ë®ëŠ” ê²Œ ì•„ë‹ˆë¼ key ë‹¨ìœ„ë¡œ ë³‘í•©                       |
| ì‹¤ë¬´ ê¸°ì¤€   | í”„ë¡œíŒŒì¼ë³„ íŒŒì¼ ë¶„ë¦¬ + ìë™í™” ì„¤ì • ì œì–´ + ë¯¼ê°ì •ë³´ ì™¸ë¶€í™” |

## í”„ë¡œíŒŒì¼ ê¸°ë°˜ ì„¤ì •

- ## `@Profile`

  ### ğŸ§© 1. `@Profile`ì´ë€?

  > Springì—ì„œ **íŠ¹ì • í™˜ê²½(Profile)**ì´ í™œì„±í™”ë˜ì–´ ìˆì„ ë•Œë§Œ
  >  **í•´ë‹¹ Bean ë˜ëŠ” ì„¤ì • í´ë˜ìŠ¤ê°€ ë“±ë¡ë˜ë„ë¡ ì œì–´í•˜ëŠ” ì–´ë…¸í…Œì´ì…˜**

  ------

  ### ğŸ¯ 2. ì™œ ì‚¬ìš©í•˜ëŠ”ê°€?

  - ê°œë°œ(dev) í™˜ê²½ì—ì„œëŠ” `ë¡œì»¬ DB`, `Mock API`, `Console Logger`
  - ìš´ì˜(prod) í™˜ê²½ì—ì„œëŠ” `ì‹¤ì œ DB`, `ì‹¤ì œ SMTP`, `File Logger`

  â¡ï¸ í™˜ê²½ì— ë”°ë¼ Bean êµ¬ì„±ì„ ë°”ê¿”ì•¼ í•  ë•Œ
   â¡ï¸ **ì¡°ê±´ë¶€ë¡œ Beanì„ ë“±ë¡/ì œì™¸**í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©

  ------

  ### âš™ï¸ 3. ì„¤ì • ë°©ì‹ (í™œì„± í”„ë¡œíŒŒì¼ ì§€ì •)

  #### âœ… `application.yml`ì—ì„œ ì§€ì •

  ```
  spring:
    profiles:
      active: dev
  ```

  #### âœ… ì‹¤í–‰ ì‹œ íŒŒë¼ë¯¸í„°ë¡œ ì§€ì •

  ```
  --spring.profiles.active=prod
  ```

  ------

  ### ğŸ“¦ 4. ì‚¬ìš© ìœ„ì¹˜

  | ëŒ€ìƒ        | ì˜ˆì‹œ                                    | ì„¤ëª…                                     |
  | ----------- | --------------------------------------- | ---------------------------------------- |
  | Bean í´ë˜ìŠ¤ | `@Component`, `@Service`, `@Repository` | í•´ë‹¹ Bean ì „ì²´ ë“±ë¡ ì œì–´                 |
  | ì„¤ì • í´ë˜ìŠ¤ | `@Configuration`                        | íŠ¹ì • ì„¤ì • í´ë˜ìŠ¤ë§Œ í™˜ê²½ì— ë”°ë¼ ì ìš©      |
  | Bean ë©”ì„œë“œ | `@Bean`                                 | `@Configuration` ì•ˆì—ì„œ ì¡°ê±´ë¶€ Bean ë“±ë¡ |

  ------

  ### ğŸ“˜ 5. ì‹¤ì „ ì˜ˆì œ

  #### âœ… â‘  ì»´í¬ë„ŒíŠ¸ì— ì§ì ‘

  ```
  @Service
  @Profile("dev")
  public class LocalMailService implements MailService {
      public void send() { System.out.println("ë¡œì»¬ ë©”ì¼ ë°œì†¡"); }
  }
  javaì½”ë“œ ë³µì‚¬@Service
  @Profile("prod")
  public class SmtpMailService implements MailService {
      public void send() { /* SMTP ë°œì†¡ */ }
  }
  ```

  ------

  #### âœ… â‘¡ ì„¤ì • í´ë˜ìŠ¤ì— ì¡°ê±´ë¶€ Bean ë“±ë¡

  ```
  @Configuration
  public class AppConfig {
  
      @Bean
      @Profile("dev")
      public DataSource h2DataSource() {
          return new EmbeddedDatabaseBuilder()
              .setType(EmbeddedDatabaseType.H2)
              .build();
      }
  
      @Bean
      @Profile("prod")
      public DataSource mysqlDataSource() {
          return DataSourceBuilder.create()
              .url("jdbc:mysql://prod-db:3306/app")
              .username("prod")
              .password("prod")
              .build();
      }
  }
  ```

  â¡ï¸ `dev`ì¼ ë•ŒëŠ” H2, `prod`ì¼ ë•ŒëŠ” MySQL ì‚¬ìš©

  ------

  ### ğŸ” 6. ì—¬ëŸ¬ í”„ë¡œíŒŒì¼ ë™ì‹œ ì§€ì •

  ```
  @Profile({"local", "dev"})
  public class LocalService implements SomeService {}
  ```

  > `local` ë˜ëŠ” `dev` ì¤‘ í•˜ë‚˜ë¼ë„ í™œì„±í™”ë˜ë©´ ë“±ë¡ë¨

  ------

  ### âŒ 7. ë¹„í™œì„±í™” ë˜ëŠ” íŠ¹ì • í™˜ê²½ ì œì™¸

  Spring ìì²´ì ìœ¼ë¡œëŠ” `@Profile("!prod")`ë„ ì§€ì›í•¨ (Spring 4.0+)

  ```
  @Profile("!prod")
  public class NonProdLogger {}
  ```

  > ë‹¨, ì´ ë°©ì‹ì€ ì‹¤ìˆ˜ ë°©ì§€ë¥¼ ìœ„í•´ ë³µì¡í•œ í™˜ê²½ì—ì„œëŠ” **Bean ì¡°ê±´ë¬¸ì´ë‚˜ `@ConditionalOnProperty`**ë¡œ ëŒ€ì²´í•˜ëŠ” ê²Œ ì¢‹ìŒ

  ------

  ### ğŸ§  8. ì‹¤ë¬´ ì„¤ê³„ íŒ¨í„´

  | ëª©ì                            | ì„¤ê³„ ë°©ì‹                                         |
  | ------------------------------ | ------------------------------------------------- |
  | DB ì»¤ë„¥ì…˜ ë³€ê²½                 | `@Profile`ì— ë”°ë¼ ë‹¤ë¥¸ DataSource ë¹ˆ ë“±ë¡         |
  | ë¡œì»¬ìš© êµ¬í˜„ì²´ vs ìš´ì˜ìš© êµ¬í˜„ì²´ | `@Service`, `@Component`ì— `@Profile`             |
  | í…ŒìŠ¤íŠ¸ ì „ìš© êµ¬ì„±               | `@Profile("test")`ë¡œ Mockito Bean ë“±ë¡            |
  | ë³µì¡í•œ ì¡°ê±´ì´ í•„ìš”í•  ë•Œ        | `@Conditional` ë˜ëŠ” `@ConditionalOnProperty` ì‚¬ìš© |

  ------

  ### âœ… ë§ˆë¬´ë¦¬ ìš”ì•½

  | í•­ëª©        | ì„¤ëª…                                                       |
  | ----------- | ---------------------------------------------------------- |
  | ì •ì˜        | íŠ¹ì • Profileì´ í™œì„±í™”ë  ë•Œë§Œ í•´ë‹¹ Beanì„ ë“±ë¡              |
  | ìœ„ì¹˜        | í´ë˜ìŠ¤, ë©”ì„œë“œ, ì„¤ì • í´ë˜ìŠ¤                                |
  | í™œì„±í™” ë°©ë²• | `spring.profiles.active`ë¡œ ì§€ì •                            |
  | ì‹¤ë¬´ ìš©ë„   | í™˜ê²½ë³„ êµ¬í˜„ ë¶„ë¦¬, ì„¤ì • ë¶„ê¸°, í…ŒìŠ¤íŠ¸ ì „ìš© Bean êµ¬ì„±         |
  | ëŒ€ì•ˆ        | ë³µì¡ ì¡°ê±´ ì‹œ `@ConditionalOnProperty`, `@Conditional` ì¶”ì²œ |

## ì»¤ìŠ¤í…€ Starter ìƒì„±

### ğŸ§© 1. ì»¤ìŠ¤í…€ Starterë€?

> Spring Bootì—ì„œ **ë°˜ë³µì ì¸ ì„¤ì •, Bean êµ¬ì„±, ì˜ì¡´ì„± ë“±ì„ íŒ¨í‚¤ì§€ë¡œ ëª¨ë“ˆí™”**í•´ì„œ
>  ë‹¤ë¥¸ í”„ë¡œì íŠ¸ì—ì„œ `spring-boot-starter-XXX`ì²˜ëŸ¼ **ì˜ì¡´ì„±ë§Œ ì¶”ê°€í•˜ë©´ ìë™ ì ìš©ë˜ë„ë¡ ë§Œë“  ë¼ì´ë¸ŒëŸ¬ë¦¬**

------

### ğŸ¯ 2. ì–¸ì œ ì“°ëŠ”ê°€?

- ì—¬ëŸ¬ í”„ë¡œì íŠ¸ì—ì„œ ê³µí†µìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ê¸°ëŠ¥(ë¡œê·¸, ë³´ì•ˆ, ê³µí†µ API, ë©”ì¼ ë“±)ì„ ëª¨ë“ˆí™”í•˜ê³  ì‹¶ì„ ë•Œ
- ì„¤ì •, Bean ë“±ë¡, í”„ë¡œí¼í‹° ë°”ì¸ë”©ì„ ìë™ìœ¼ë¡œ ì²˜ë¦¬í•˜ê³  ì‹¶ì„ ë•Œ
- íšŒì‚¬ ì „ìš© ê³µí†µ Infra, ê³µí†µ ë³´ì•ˆ ì„¤ì •, ê³µí†µ ë©”ì‹œì§•, ê³µí†µ ì»¨íŠ¸ë¡¤ëŸ¬ ë“± êµ¬ì„±

------

### âš™ï¸ 3. êµ¬ì„± ìš”ì†Œ ìš”ì•½

| êµ¬ì„± ìš”ì†Œ                                                    | ì—­í•                                                |
| ------------------------------------------------------------ | -------------------------------------------------- |
| `starter` ëª¨ë“ˆ                                               | ë‹¤ë¥¸ í”„ë¡œì íŠ¸ì—ì„œ ì˜ì¡´ì„± ì¶”ê°€ ì‹œ ì‚¬ìš©              |
| `autoconfigure` ëª¨ë“ˆ                                         | ìë™ ì„¤ì • ë¡œì§ì„ ë‹´ì€ ëª¨ë“ˆ (ë¹ˆ ë“±ë¡, ì¡°ê±´ ì œì–´ ë“±) |
| `spring.factories` ë˜ëŠ” `META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports` | ìë™ ì„¤ì • í´ë˜ìŠ¤ë¥¼ Spring Bootì— ë“±ë¡              |

------

### ğŸ§± 4. êµ¬ì¡° ì˜ˆì‹œ

```
my-custom-starter/
â”œâ”€â”€ my-starter-autoconfigure/     â† ìë™ ì„¤ì • ëª¨ë“ˆ
â”‚   â””â”€â”€ ... (ì„¤ì • í´ë˜ìŠ¤, properties, factories ë“±)
â”œâ”€â”€ my-starter/                   â† ì™¸ë¶€ì— ë…¸ì¶œí•  starter
â”‚   â””â”€â”€ pom.xml (ìë™ ì„¤ì • ëª¨ë“ˆ í¬í•¨)
```

> `my-starter`ëŠ” ì‹¤ì œë¡œ Bean ë“±ë¡ X. ë‹¨ì§€ `autoconfigure`ë¥¼ transitively í¬í•¨í•˜ëŠ” wrapperì„.

------

### ğŸ“¦ 5. ì‹¤ì „ ì˜ˆì œ: "hello-starter"

#### âœ… 1ë‹¨ê³„: `hello-spring-boot-autoconfigure` ìƒì„±

#### ğŸ“„ `HelloProperties.java`

```
@ConfigurationProperties(prefix = "hello")
public class HelloProperties {
    private String name = "World";
    public String getName() { return name; }
    public void setName(String name) { this.name = name; }
}
```

#### ğŸ“„ `HelloService.java`

```
public class HelloService {
    private final HelloProperties props;

    public HelloService(HelloProperties props) {
        this.props = props;
    }

    public String sayHello() {
        return "Hello, " + props.getName();
    }
}
```

#### ğŸ“„ `HelloAutoConfiguration.java`

```
@Configuration
@ConditionalOnClass(HelloService.class)
@EnableConfigurationProperties(HelloProperties.class)
public class HelloAutoConfiguration {

    @Bean
    @ConditionalOnMissingBean
    public HelloService helloService(HelloProperties props) {
        return new HelloService(props);
    }
}
```

#### ğŸ“„ `resources/META-INF/spring.factories` (Spring Boot 2.xìš©)

```
org.springframework.boot.autoconfigure.EnableAutoConfiguration=\
com.example.hello.HelloAutoConfiguration
```

âœ… **ë˜ëŠ” Spring Boot 3.x** ì´ìƒì—ì„œëŠ”:

```
resources/META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports
```

```
com.example.hello.HelloAutoConfiguration
```

------

### âœ… 2ë‹¨ê³„: `hello-spring-boot-starter` ìƒì„±

```
<!-- hello-starterì˜ pom.xml -->
<dependencies>
  <dependency>
    <groupId>com.example</groupId>
    <artifactId>hello-spring-boot-autoconfigure</artifactId>
    <version>1.0.0</version>
  </dependency>
</dependencies>
```

------

### ğŸ§ª 6. ì‚¬ìš© ì˜ˆì œ (ë‹¤ë¥¸ í”„ë¡œì íŠ¸ì—ì„œ)

```
<dependency>
  <groupId>com.example</groupId>
  <artifactId>hello-spring-boot-starter</artifactId>
  <version>1.0.0</version>
</dependency>
```

```
hello:
  name: Jeongseok
```

```
@RestController
public class HelloController {
    private final HelloService helloService;
    public HelloController(HelloService helloService) {
        this.helloService = helloService;
    }

    @GetMapping("/hello")
    public String hello() {
        return helloService.sayHello();  // â†’ Hello, Jeongseok
    }
}
```

------

### ğŸ” 7. ì‹¤ë¬´ ì„¤ê³„ íŒ

| ëª©ì                          | ì„¤ê³„ íŒ¨í„´                                              |
| ---------------------------- | ------------------------------------------------------ |
| ê³µí†µ ì„¤ì • ëª¨ë“ˆí™”             | `starter-autoconfigure`ì— ì„¤ì • í´ë˜ìŠ¤, properties ë¶„ë¦¬ |
| ì™¸ë¶€ ë…¸ì¶œìš©ì€ starterë§Œ ì œê³µ | ì‹¤ì œ ì„¤ì •ì€ ë‚´ë¶€ì—ì„œ í•¨                                |
| ê¸°ëŠ¥ í™œì„±í™” ì œì–´             | `@ConditionalOnProperty`ë¡œ ON/OFF ê°€ëŠ¥í•˜ê²Œ ì„¤ê³„        |
| ë³µì¡í•œ ê¸°ëŠ¥ ì„ íƒ             | `@ConditionalOnBean`, `@ConditionalOnClass` ì¡°í•© ì‚¬ìš©  |
| ì„¤ì • ê°’ ìë™ì™„ì„± ì§€ì›        | `spring-boot-configuration-processor` ì¶”ê°€             |

------

### âœ… ë§ˆë¬´ë¦¬ ìš”ì•½

| í•­ëª©                                                         | ì„¤ëª…                                                  |
| ------------------------------------------------------------ | ----------------------------------------------------- |
| `@Configuration` + `@Conditional*` + `@EnableConfigurationProperties` | ìë™ ì„¤ì •ì˜ í•µì‹¬ ì¡°í•©                                 |
| `spring.factories` or `AutoConfiguration.imports`            | Spring Bootê°€ ìë™ìœ¼ë¡œ ì½ì–´ë“¤ì´ëŠ” ê²½ë¡œ                |
| `starter` ëª¨ë“ˆ                                               | ì™¸ë¶€ì— ì œê³µí•  wrapper                                 |
| ì‹¤ë¬´ ìœ ìš©ì„±                                                  | ê³µí†µ ê¸°ëŠ¥ ì¬ì‚¬ìš©, ë©€í‹° ëª¨ë“ˆ í™˜ê²½ì—ì„œ ëŒ€í­ ìƒì‚°ì„± í–¥ìƒ |

## DevTools, Hot Reload

### ğŸ§© 1. Spring Boot DevToolsë€?

> Spring Bootì—ì„œ ì œê³µí•˜ëŠ” **ê°œë°œ ì „ìš© ë„êµ¬ ëª¨ë“ˆ**ë¡œ,
>  **ìë™ ì¬ì‹œì‘**, **LiveReload**, **ìºì‹œ ë¹„í™œì„±í™”**, **ì†ì„± ë³€ê²½ ê°ì§€**, **í…œí”Œë¦¿ í•« ë¦¬ë¡œë”©** ë“±ì„ ì§€ì›í•¨.

> âœ”ï¸ ìš´ì˜ í™˜ê²½ì—ì„œëŠ” ìë™ ë¹„í™œì„±í™”ë¨ (classpath í™•ì¸)

------

### âœ… 2. ì£¼ìš” ê¸°ëŠ¥ ìš”ì•½

| ê¸°ëŠ¥                     | ì„¤ëª…                                           |
| ------------------------ | ---------------------------------------------- |
| **ìë™ ì¬ì‹œì‘**          | í´ë˜ìŠ¤ íŒŒì¼ì´ ë³€ê²½ë˜ë©´ ì•±ì„ ìë™ìœ¼ë¡œ ì¬ì‹œì‘    |
| **LiveReload ì§€ì›**      | ë¸Œë¼ìš°ì €ê°€ ìë™ìœ¼ë¡œ ìƒˆë¡œê³ ì¹¨ë¨                 |
| **í…œí”Œë¦¿ ìºì‹œ ì œê±°**     | Thymeleaf, JSP ë“±ì˜ ìºì‹œë¥¼ ë” (ë³€ê²½ ì¦‰ì‹œ ë°˜ì˜) |
| **ì„¤ì •ê°’ ë³€ê²½ ê°ì§€**     | `application.yml` ë³€ê²½ ì‹œ ìë™ ì ìš©            |
| **H2 Console ìë™ ë“±ë¡** | ê¸°ë³¸ ì„¤ì •ìœ¼ë¡œ í¸í•˜ê²Œ í™•ì¸ ê°€ëŠ¥                 |

------

### âš™ï¸ 3. ì„¤ì¹˜ ë°©ë²•

#### âœ… Maven

```
<dependency>
  <groupId>org.springframework.boot</groupId>
  <artifactId>spring-boot-devtools</artifactId>
  <scope>runtime</scope> <!-- ë˜ëŠ” optional -->
</dependency>
```

#### âœ… Gradle

```
runtimeOnly("org.springframework.boot:spring-boot-devtools")
```

> ğŸ§  `runtimeOnly` ë˜ëŠ” `optional`ë¡œ ì¶”ê°€í•´ì•¼ **ë¹Œë“œ ê²°ê³¼ë¬¼ì—ëŠ” í¬í•¨ë˜ì§€ ì•ŠìŒ**

------

### ğŸ“¦ 4. ì‘ë™ êµ¬ì¡° ìš”ì•½

Spring DevToolsëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ì‘ë™í•´:

```
í´ë˜ìŠ¤ íŒŒì¼ ë³€ê²½ ê°ì§€ (target/classes)
 â†’ ë‚´ì¥ ì¬ì‹œì‘ í´ë˜ìŠ¤ë¡œ ì „ì²´ Context ì¬ìƒì„±
 â†’ ë¹ ë¥´ê²Œ ì•± ì¬ì‹œì‘
```

âœ… **ì „ì²´ JVMì„ ì¢…ë£Œí•˜ì§€ ì•Šê³ **, **Spring Contextë§Œ ì¬ì‹œì‘**í•˜ê¸° ë•Œë¬¸ì— ë¹ ë¦„.

------

### ğŸ” 5. ìë™ ì¬ì‹œì‘ vs LiveReload ì°¨ì´

| í•­ëª©          | ìë™ ì¬ì‹œì‘                 | LiveReload                              |
| ------------- | --------------------------- | --------------------------------------- |
| ëŒ€ìƒ          | Java í´ë˜ìŠ¤, ì„¤ì • íŒŒì¼ ë³€ê²½ | HTML, CSS, JS ë“± ì •ì  ë¦¬ì†ŒìŠ¤ ë³€ê²½       |
| ë°©ì‹          | Spring Context ì¬ì‹œì‘       | ë¸Œë¼ìš°ì € ìë™ ìƒˆë¡œê³ ì¹¨                  |
| ì‹¤í–‰ ë°©ì‹     | Java Watcher (íŒŒì¼ ê°ì§€)    | LiveReload ì„œë²„ + ë¸Œë¼ìš°ì € í”ŒëŸ¬ê·¸ì¸     |
| ë¸Œë¼ìš°ì € ê°œì… | âŒ                           | âœ… (í™•ì¥ í”„ë¡œê·¸ë¨ ë˜ëŠ” iframe ì‚½ì… í•„ìš”) |

------

### ğŸ’¡ 6. IntelliJ ì—°ë™ íŒ

#### âœ… "Make project automatically"

- `Ctrl + Shift + A` â†’ â€œRegistryâ€ ê²€ìƒ‰ â†’ `compiler.automake.allow.when.app.running` **ì²´í¬**
- Preferences â†’ Build, Execution, Deployment â†’ Compiler â†’ **Build project automatically** **ON**

> â˜ï¸ ì´ ì„¤ì • ì—†ìœ¼ë©´ **ìë™ ì¬ì‹œì‘ì´ ì•ˆ ë¨**

------

### ğŸ“˜ 7. ì„¤ì • ì˜ˆì‹œ

#### âœ… `application.yml` ê°œë°œ ì „ìš© ì„¤ì •

```
spring:
  thymeleaf:
    cache: false
  freemarker:
    cache: false
  devtools:
    restart:
      enabled: true
    livereload:
      enabled: true
```

------

### ğŸ”¥ 8. ì‹¤ë¬´ì—ì„œ ìì£¼ ë¬»ëŠ” Q&A

| ì§ˆë¬¸                                       | ë‹µë³€                                                         |
| ------------------------------------------ | ------------------------------------------------------------ |
| ìš´ì˜ ë°°í¬ ì‹œ í¬í•¨ë˜ë‚˜ìš”?                   | âŒ classpathì— `spring-devtools`ê°€ ìˆìœ¼ë©´ ìë™ ë¹„í™œì„±í™”ë¨     |
| static/js, static/css ìˆ˜ì •ì€ ì¬ì‹œì‘í•˜ë‚˜ìš”? | âŒ LiveReloadë¡œ ë¸Œë¼ìš°ì €ë§Œ ìƒˆë¡œê³ ì¹¨                           |
| Java ìˆ˜ì • â†’ ë¹Œë“œí•˜ë©´?                      | âœ… ìë™ ì¬ì‹œì‘ë¨                                              |
| ì†ë„ ëŠë¦°ë°ìš”?                             | ë„ˆë¬´ ë§ì€ íŒŒì¼ ë³€ê²½, dependency scan í¬ê¸° ë¬¸ì œ â†’ `restart.exclude` ì‚¬ìš© ê¶Œì¥ |
| ë³€ê²½ ë°˜ì˜ì´ ì•ˆ ë˜ëŠ”ë°ìš”?                   | IntelliJ ìë™ ë¹Œë“œ ì„¤ì • ì²´í¬, ì™¸ë¶€ ë¹Œë“œë„ í™•ì¸ (Gradle build task X) |

------

### ğŸ§  9. ê³ ê¸‰ ì„¤ì • (`META-INF/spring-devtools.properties`)

```
# íŠ¹ì • íŒ¨í‚¤ì§€ë‚˜ íŒŒì¼ì€ ì¬ì‹œì‘ ì œì™¸
restart.exclude=static/**,public/**,templates/**,resources/**

# classloader ì¬í™œìš© (ì†ë„ í–¥ìƒ)
restart.include.custom=com.example.sharedlib
```

------

### âœ… ë§ˆë¬´ë¦¬ ìš”ì•½

| í•­ëª©                   | ì„¤ëª…                                                      |
| ---------------------- | --------------------------------------------------------- |
| `spring-boot-devtools` | ê°œë°œ í¸ì˜ìš© ëª¨ë“ˆ (ìš´ì˜ í™˜ê²½ì—ì„œëŠ” ìë™ ì œì™¸ë¨)            |
| ìë™ ì¬ì‹œì‘            | í´ë˜ìŠ¤ íŒŒì¼ ë³€ê²½ ì‹œ Spring Contextë§Œ ì¬ì‹œì‘               |
| LiveReload             | HTML/CSS/JS ë“± ì •ì  ë¦¬ì†ŒìŠ¤ ë³€ê²½ ì‹œ ë¸Œë¼ìš°ì € ìë™ ìƒˆë¡œê³ ì¹¨ |
| IntelliJ ì„¤ì • í•„ìˆ˜     | ìë™ ë¹Œë“œ + registry ì„¤ì • ì²´í¬í•´ì•¼ ì‹¤ì‹œê°„ ì ìš©ë¨          |
| ì‹¤ë¬´ íŒ                | ë¹ ë¥¸ í”¼ë“œë°± ë£¨í”„ + í…œí”Œë¦¿ ìºì‹œ OFF + ì•ˆì „í•˜ê²Œ ìš´ì˜ ë¶„ë¦¬ë¨ |